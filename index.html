    <!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–†–¢–§–õ–û–†–ê</title>
    <script src="https://telegram.org/js/telegram-web-app.js?2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{
            --primary:#6b7280;--primary-dark:#374151;--primary-light:#d1d5db;
            --secondary:#9ca3af;--secondary-dark:#6b7280;--accent:#6b7280;
            --accent-dark:#374151;--text:#1f2937;--text-light:#6b7280;
            --text-lighter:#9ca3af;--bg:#ffffff;--bg-secondary:#f8fafc;
            --bg-tertiary:#f1f5f9;--card-bg:#ffffff;--shadow:0 4px 12px rgba(0,0,0,0.08);
            --shadow-lg:0 10px 25px rgba(0,0,0,0.12);--shadow-sm:0 1px 4px rgba(0,0,0,0.06);
            --border:1px solid #e5e7eb;--radius:16px;--radius-sm:10px;--radius-lg:20px;
            --header-bg:linear-gradient(135deg,#6b7280 0%,#374151 100%);
            --price-color:#000000;--button-bg:linear-gradient(135deg,#6b7280 0%,#374151 100%);
            --fact-border:#6b7280;--fact-icon:#f59e0b;
        }
        body{
            font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;
            background:var(--header-bg);
            color:var(--text);min-height:100vh;line-height:1.5
        }
        .app-container{max-width:400px;margin:0 auto;background:var(--bg);min-height:100vh;position:relative;overflow-x:hidden}
        
        .snow-container,.rain-container,.confetti-container,.night-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;display:none}
        .snowflake{position:absolute;background:white;border-radius:50%;opacity:0.8;animation:fall linear infinite}
        .raindrop{position:absolute;background:linear-gradient(to bottom, rgba(59,130,246,0.8), rgba(147,197,253,0.5));width:2px;height:15px;animation:rainFall linear infinite}
        .confetti{position:absolute;width:10px;height:10px;opacity:0.7;animation:confettiFall linear infinite}
        .night-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:1}
        .light-spot{position:absolute;width:80px;height:80px;border-radius:50%;background:radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);pointer-events:none;z-index:2;mix-blend-mode:screen;animation:pulse 3s infinite alternate;opacity:0}
        .fact-light{position:relative;overflow:hidden}
        .fact-light:hover::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(circle at var(--mouse-x) var(--mouse-y), rgba(255,255,255,0.2) 0%, transparent 50%);pointer-events:none}
        .fact-light:hover .fact-icon{color:#fbbf24;text-shadow:0 0 10px #f59e0b,0 0 20px #f59e0b;transform:scale(1.1)}
        .fact-icon{transition:all 0.3s ease}
        @keyframes fall{0%{transform:translateY(-10px) rotate(0deg)}100%{transform:translateY(100vh) rotate(360deg)}}
        @keyframes rainFall{0%{transform:translateY(-10px) translateX(0)}100%{transform:translateY(100vh) translateX(10px)}}
        @keyframes confettiFall{0%{transform:translateY(-10px) rotate(0deg)}50%{transform:translateY(50vh) rotate(180deg)}100%{transform:translateY(100vh) rotate(360deg)}}
        @keyframes pulse{0%{opacity:0.2}100%{opacity:0.5}}
        @keyframes spotAppear{0%{opacity:0;transform:scale(0)}50%{opacity:0.5;transform:scale(1)}100%{opacity:0;transform:scale(1.5)}}
        
        .header{background:var(--header-bg);color:white;padding:40px 20px 30px;text-align:center;position:relative;overflow:hidden}
        .header.dots::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="dots" x="0" y="0" width="30" height="30" patternUnits="userSpaceOnUse"><circle cx="15" cy="15" r="5" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23dots)"/></svg>')}
        .header.lines::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="lines" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><line x1="0" y1="0" x2="0" y2="20" stroke="white" stroke-width="2" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23lines)"/></svg>')}
        .header.flowers::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="flowers" x="0" y="0" width="25" height="25" patternUnits="userSpaceOnUse"><path d="M12.5,5 C10,5 7.5,7.5 7.5,10 C7.5,12.5 10,15 12.5,15 C15,15 17.5,12.5 17.5,10 C17.5,7.5 15,5 12.5,5 Z" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23flowers)"/></svg>')}
        .header.hearts::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="hearts" x="0" y="0" width="25" height="25" patternUnits="userSpaceOnUse"><path d="M12.5,6 C10,6 7.5,8.5 7.5,11 C7.5,13.5 10,16 12.5,16 C15,16 17.5,13.5 17.5,11 C17.5,8.5 15,6 12.5,6 Z" fill="white" opacity="0.1" transform="rotate(45 12.5 11)"/></pattern></defs><rect width="100" height="100" fill="url(%23hearts)"/></svg>')}
        .header.stars::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="stars" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><polygon points="10,2 12,8 18,8 13,12 15,18 10,14 5,18 7,12 2,8 8,8" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23stars)"/></svg>')}
        .header.waves::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="waves" x="0" y="0" width="30" height="30" patternUnits="userSpaceOnUse"><path d="M0,15 Q15,5 30,15 T60,15 T90,15 T120,15" stroke="white" stroke-width="2" fill="none" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23waves)"/></svg>')}
        .header.geometric::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="geometric" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect x="0" y="0" width="10" height="10" fill="white" opacity="0.1"/><rect x="10" y="10" width="10" height="10" fill="white" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23geometric)"/></svg>')}
        .header-content{position:relative;z-index:2}
        .header h1{font-size:28px;font-weight:800;margin-bottom:6px;text-shadow:0 2px 4px rgba(0,0,0,0.2)}
        .header p{font-size:14px;opacity:0.95;font-weight:500;margin-bottom:12px}
        .delivery-info{background:rgba(255,255,255,0.2);padding:10px 14px;border-radius:12px;font-size:13px;font-weight:600;backdrop-filter:blur(10px);margin-top:8px}
        
        .categories{display:flex;gap:6px;padding:16px;overflow-x:auto;background:var(--bg);border-bottom:var(--border)}
        .category-btn{padding:12px 18px;border:2px solid #e5e7eb;border-radius:16px;background:white;color:var(--text);font-weight:600;white-space:nowrap;cursor:pointer;transition:all 0.2s ease;font-size:13px;display:flex;align-items:center;gap:4px;flex-shrink:0}
        .category-btn.active{background:var(--button-bg);color:white;border-color:var(--primary);box-shadow:var(--shadow-sm)}
        
        .products-grid{padding:16px;display:grid;gap:16px;padding-bottom:80px}
        .product-card{background:var(--card-bg);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);transition:all 0.3s ease;border:var(--border)}
        .product-card:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
        .product-image{width:100%;height:180px;background:linear-gradient(135deg,#f3f4f6 0%,#e5e7eb 100%);position:relative;overflow:hidden}
        .product-image img{width:100%;height:100%;object-fit:cover}
        .product-badge{position:absolute;top:10px;right:10px;background:var(--button-bg);color:white;padding:4px 10px;border-radius:10px;font-size:11px;font-weight:700}
        .product-content{padding:16px}
        .product-title{font-size:16px;font-weight:700;margin-bottom:6px;color:var(--text);line-height:1.3}
        .product-description{font-size:13px;color:var(--text-light);margin-bottom:10px;line-height:1.4}
        .product-fact{background:white;padding:10px 12px;border-radius:var(--radius-sm);margin-bottom:12px;border:2px solid var(--fact-border);display:flex;align-items:flex-start;cursor:pointer}
        .product-fact i{color:var(--fact-icon);margin-right:8px;transition:all 0.3s ease;flex-shrink:0;margin-top:2px}
        .product-fact:hover i{color:#fbbf24;text-shadow:0 0 10px var(--fact-icon),0 0 20px var(--fact-icon);transform:scale(1.1)}
        .product-fact-text{font-size:12px;color:var(--text);font-style:italic;line-height:1.4;flex:1}
        .product-footer{display:flex;justify-content:space-between;align-items:center}
        .product-price{font-size:18px;font-weight:800;color:var(--price-color)}
        .add-to-cart{background:var(--button-bg);color:white;border:none;border-radius:16px;padding:12px 16px;font-weight:600;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:6px;font-size:13px;min-height:44px}
        .add-to-cart:hover{transform:scale(1.05)}
        
        .floating-buttons{position:fixed;bottom:16px;right:16px;display:flex;flex-direction:column;gap:8px;z-index:1000}
        .cart-button{background:var(--button-bg);color:white;border:none;border-radius:40px;padding:14px 20px;font-size:14px;font-weight:700;cursor:pointer;box-shadow:var(--shadow-lg);display:none;align-items:center;gap:8px;transition:all 0.2s ease;min-height:44px}
        .cart-count{background:var(--secondary);color:white;border-radius:50%;width:22px;height:22px;font-size:12px;display:flex;align-items:center;justify-content:center;font-weight:800}
        .admin-button{background:var(--button-bg);color:white;border:none;border-radius:40px;padding:14px;font-size:16px;cursor:pointer;box-shadow:var(--shadow-lg);transition:all 0.2s ease;display:none;min-height:44px;min-width:44px;align-items:center;justify-content:center}
        .help-button{background:linear-gradient(135deg,#6b7280 0%,#374151 100%);color:white;border:none;border-radius:40px;padding:14px;font-size:16px;cursor:pointer;box-shadow:var(--shadow-lg);transition:all 0.2s ease;display:flex;min-height:44px;min-width:44px;align-items:center;justify-content:center}
        
        .modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:none;justify-content:center;align-items:center;z-index:2000;padding:16px;backdrop-filter:blur(5px)}
        .modal-content{background:white;border-radius:var(--radius-lg);padding:20px;max-width:360px;width:100%;max-height:80vh;overflow-y:auto;animation:modalSlideIn 0.3s ease;box-shadow:var(--shadow-lg)}
        @keyframes modalSlideIn{from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:translateY(0)}}
        .modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:12px;border-bottom:2px solid #f0f0f0}
        .modal-title{font-size:18px;font-weight:800;color:var(--text);display:flex;align-items:center;gap:6px}
        .close-modal{background:none;border:none;font-size:24px;cursor:pointer;color:var(--text-light);width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;min-height:44px;min-width:44px}
        .close-modal:hover{background:#f0f0f0}
        
        .cart-items{margin-bottom:20px;max-height:250px;overflow-y:auto}
        .cart-item{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f0f0f0}
        .item-info{flex-grow:1}
        .item-name{font-weight:700;margin-bottom:2px;color:var(--text);font-size:14px}
        .item-price{color:var(--price-color);font-weight:700;font-size:14px}
        .item-actions{display:flex;align-items:center;gap:8px}
        .quantity-controls{display:flex;align-items:center;gap:6px;background:#f8f9fa;border-radius:16px;padding:3px;border:1px solid #e5e7eb}
        .quantity-btn{background:var(--primary);color:white;border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-weight:bold;font-size:14px;transition:all 0.2s ease;min-height:44px;min-width:44px}
        .quantity-btn:hover{background:var(--primary-dark)}
        .quantity{font-weight:700;min-width:24px;text-align:center;font-size:14px}
        .remove-item{background:#ef4444;color:white;border:none;border-radius:12px;padding:8px 12px;font-size:12px;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:4px;min-height:44px}
        .remove-item:hover{background:#dc2626}
        
        .cart-total{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-top:12px;border-top:2px solid #e5e7eb;font-size:18px;font-weight:800}
        .form-group{margin-bottom:16px}
        .form-label{display:block;margin-bottom:6px;font-weight:600;color:var(--text);font-size:14px}
        .form-input{width:100%;padding:12px;border:2px solid #e5e7eb;border-radius:12px;font-size:14px;transition:all 0.2s ease;font-weight:500;background:white;min-height:44px}
        .form-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(107,114,128,0.1)}
        .phone-input{font-family:monospace;letter-spacing:1px}
        .checkout-btn{width:100%;background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:white;border:none;border-radius:16px;padding:16px;font-size:15px;font-weight:700;cursor:pointer;transition:all 0.2s ease;margin-top:8px;box-shadow:var(--shadow);min-height:44px}
        .checkout-btn:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
        .checkout-btn:disabled{background:#9ca3af;cursor:not-allowed;transform:none;box-shadow:none}
        
        .empty-cart{text-align:center;padding:30px 16px;color:var(--text-light)}
        .empty-cart i{font-size:40px;color:#d1d5db;margin-bottom:12px}
        .success-state{text-align:center;padding:24px 16px}
        .success-icon{font-size:50px;color:#10b981;margin-bottom:16px}
        .success-title{font-size:20px;font-weight:800;margin-bottom:8px;color:var(--text)}
        .success-message{color:var(--text-light);margin-bottom:20px;line-height:1.4;font-size:14px}
        
        .loading{text-align:center;padding:30px 16px;color:var(--text-light)}
        .loading-spinner{border:3px solid #f3f3f3;border-top:3px solid var(--primary);border-radius:50%;width:32px;height:32px;animation:spin 1s linear infinite;margin:0 auto 16px}
        @keyframes spin{0%{transform:rotate(0deg)} 100%{transform:rotate(360deg)}}
        
        .admin-panel{display:none;background:var(--bg);min-height:100vh}
        .admin-header{background:var(--header-bg);color:white;padding:18px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:var(--border)}
        .admin-title{font-size:18px;font-weight:700}
        .admin-switch{background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.3);color:white;padding:8px 14px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:6px;font-size:13px;min-height:44px}
        .admin-switch:hover{background:rgba(255,255,255,0.3)}
        
        .admin-tabs{display:flex;gap:6px;padding:12px;background:var(--bg-secondary);border-bottom:var(--border);overflow-x:auto}
        .admin-tab{padding:10px 14px;border:2px solid #e5e7eb;border-radius:12px;background:white;color:var(--text);font-weight:600;white-space:nowrap;cursor:pointer;transition:all 0.2s ease;font-size:12px;display:flex;align-items:center;gap:4px;flex-shrink:0;min-height:44px}
        .admin-tab.active{background:var(--button-bg);color:white;border-color:var(--primary)}
        .admin-content{padding:16px}
        .admin-tab-content{display:none}
        .admin-tab-content.active{display:block}
        
        .stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px}
        .stat-card{background:white;padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);text-align:center;border-left:3px solid var(--primary)}
        .stat-value{font-size:20px;font-weight:800;color:#000000;margin-bottom:4px}
        .stat-label{color:var(--text-light);font-size:11px;font-weight:600}
        
        .product-form{background:white;padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:16px;border:var(--border)}
        .form-title{font-size:16px;font-weight:700;margin-bottom:12px;color:var(--text);display:flex;align-items:center;gap:6px;cursor:pointer}
        .form-title i{transition:transform 0.2s ease}
        .form-row { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:12px }
        .form-full { grid-column:1/-1 }
        .form-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
        .collapsible-content{max-height:0;overflow:hidden;transition:max-height 0.3s ease}
        .collapsible-content.expanded{max-height:500px}
        
        .search-box{background:white;padding:12px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:12px;border:var(--border)}
        .search-input{width:100%;padding:10px;border:2px solid #e5e7eb;border-radius:10px;font-size:13px;min-height:44px}
        .search-input:focus{outline:none;border-color:var(--primary)}
        
        .filter-buttons{display:flex;gap:6px;margin-top:8px;overflow-x:auto}
        .filter-btn{padding:8px 12px;border:2px solid #e5e7eb;border-radius:10px;background:white;color:var(--text);font-weight:600;cursor:pointer;white-space:nowrap;font-size:11px;transition:all 0.2s ease;flex-shrink:0;min-height:44px}
        .filter-btn.active{background:var(--primary);color:white;border-color:var(--primary)}
        
        .admin-table-container{background:white;border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);margin-bottom:16px;border:var(--border);max-height:400px;overflow-y:auto;overflow-x:auto}
        .admin-table{width:100%;border-collapse:collapse;min-width:600px}
        .table-header{background:#f8fafc;border-bottom:1px solid #e5e7eb;font-weight:700;font-size:12px;color:var(--text)}
        .table-header th{padding:12px 8px;text-align:left;border-bottom:1px solid #e5e7eb;white-space:nowrap}
        .table-row td{padding:12px 8px;border-bottom:1px solid #f0f0f0;font-size:12px;color:var(--text-light);transition:all 0.2s ease;white-space:nowrap}
        .table-row:hover{background:#f8f9fa}
        .table-row:last-child td{border-bottom:none}
        
        .status-badge{padding:6px 10px;border-radius:8px;font-size:10px;font-weight:600;text-align:center}
        .btn{padding:10px 14px;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:12px;transition:all 0.2s ease;display:inline-flex;align-items:center;gap:4px;min-height:44px}
        .btn:hover{transform:translateY(-1px)}
        .btn-primary{background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:white}
        .btn-secondary{background:#6b7280;color:white}
        .btn-danger{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%);color:white}
        .btn-sm{padding:8px 12px;font-size:11px}
        .btn-lg{padding:12px 18px;font-size:14px}
        
        .toast{position:fixed;top:16px;left:50%;transform:translateX(-50%) translateY(-80px);color:white;padding:12px 18px;border-radius:20px;box-shadow:var(--shadow-lg);z-index:3000;transition:all 0.3s ease;font-weight:600;display:flex;align-items:center;gap:8px;opacity:0;backdrop-filter:blur(10px);font-size:14px}
        .toast.show{transform:translateX(-50%) translateY(0);opacity:1}
        .toast.success{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}
        .toast.error{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%)}
        .toast.info{background:linear-gradient(135deg,#6b7280 0%,#374151 100%)}
        
        .delivery-banner{background:linear-gradient(135deg,var(--primary-light) 0%,#e5e7eb 100%);padding:12px 16px;margin:0 16px 16px;border-radius:var(--radius);border-left:3px solid var(--primary);display:flex;align-items:center;gap:8px;font-weight:600;color:var(--text);font-size:13px}
        .delivery-banner i{color:var(--primary);font-size:16px}
        
        .badge{display:inline-flex;align-items:center;gap:2px;padding:4px 8px;border-radius:6px;font-size:10px;font-weight:700;text-transform:uppercase}
        .badge.new{background:#fef3c7;color:#92400e}
        .badge.confirmed{background:#dbeafe;color:#1e40af}
        .badge.delivered{background:#dcfce7;color:#166534}
        .badge.cancelled{background:#fecaca;color:#991b1b}
        
        .empty-table-message{text-align:center;padding:30px 16px;color:var(--text-light);font-size:14px}
        .role-badge{padding:6px 10px;border-radius:6px;font-size:10px;font-weight:700;text-transform:uppercase}
        .role-owner{background:#fee2e2;color:#dc2626}
        .role-admin{background:#dbeafe;color:#1d4ed8}
        
        .settings-group{margin-bottom:16px}
        .settings-label{font-weight:600;margin-bottom:6px;color:var(--text);font-size:14px}
        .settings-hint{font-size:12px;color:var(--text-light);margin-top:4px}
        .checkbox-group{display:flex;align-items:center;gap:8px;margin-bottom:12px}
        .checkbox-label{font-weight:600;color:var(--text);font-size:14px}
        
        .delivery-option{background:white;border:2px solid #e5e7eb;border-radius:12px;padding:12px;margin-bottom:12px;cursor:pointer;transition:all 0.2s ease;min-height:44px}
        .delivery-option.selected{border-color:var(--primary);background:var(--primary-light)}
        .delivery-option-header{display:flex;align-items:center;gap:8px;margin-bottom:8px}
        .delivery-option-title{font-weight:700;font-size:14px}
        .delivery-option-description{font-size:12px;color:var(--text-light)}
        .delivery-price{font-weight:700;color:var(--secondary);font-size:14px}
        
        .admin-actions{display:flex;gap:6px;flex-wrap:wrap}
        .contact-btn{background:linear-gradient(135deg,#6b7280 0%,#374151 100%);color:white;border:none;border-radius:6px;padding:8px 12px;font-size:11px;cursor:pointer;display:flex;align-items:center;gap:4px;min-height:44px}
        
        .settings-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
        .settings-full{grid-column:1/-1}
        .settings-input{width:100%;padding:12px;border:2px solid #e5e7eb;border-radius:10px;font-size:13px;min-height:44px}
        .settings-input:focus{outline:none;border-color:var(--primary)}
        
        .theme-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-top:12px}
        .theme-option{height:80px;border-radius:12px;cursor:pointer;border:3px solid transparent;transition:all 0.2s ease;position:relative}
        .theme-option.selected{border-color:#10b981}
        .theme-option::after{content:'‚úì';position:absolute;top:8px;right:8px;background:#10b981;color:white;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold;opacity:0;transition:opacity 0.2s ease}
        .theme-option.selected::after{opacity:1}
        
        .pattern-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:12px}
        .pattern-option{height:60px;border-radius:12px;cursor:pointer;border:3px solid transparent;transition:all 0.2s ease;position:relative;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:12px;color:var(--text)}
        .pattern-option.selected{border-color:#10b981}
        .pattern-option::after{content:'‚úì';position:absolute;top:8px;right:8px;background:#10b981;color:white;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:bold;opacity:0;transition:opacity 0.2s ease}
        .pattern-option.selected::after{opacity:1}
        .pattern-option.dots{background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="dots" x="0" y="0" width="30" height="30" patternUnits="userSpaceOnUse"><circle cx="15" cy="15" r="5" fill="%236b7280" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23dots)"/></svg>')}
        .pattern-option.lines{background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="lines" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><line x1="0" y1="0" x2="0" y2="20" stroke="%236b7280" stroke-width="2" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23lines)"/></svg>')}
        .pattern-option.flowers{background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="flowers" x="0" y="0" width="25" height="25" patternUnits="userSpaceOnUse"><path d="M12.5,5 C10,5 7.5,7.5 7.5,10 C7.5,12.5 10,15 12.5,15 C15,15 17.5,12.5 17.5,10 C7.5,7.5 15,5 12.5,5 Z" fill="%236b7280" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23flowers)"/></svg>')}
        .pattern-option.hearts{background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="hearts" x="0" y="0" width="25" height="25" patternUnits="userSpaceOnUse"><path d="M12.5,6 C10,6 7.5,8.5 7.5,11 C7.5,13.5 10,16 12.5,16 C15,16 17.5,13.5 17.5,11 C17.5,8.5 15,6 12.5,6 Z" fill="%236b7280" opacity="0.1" transform="rotate(45 12.5 11)"/></pattern></defs><rect width="100" height="100" fill="url(%23hearts)"/></svg>')}
        .pattern-option.stars{background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="stars" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><polygon points="10,2 12,8 18,8 13,12 15,18 10,14 5,18 7,12 2,8 8,8" fill="%236b7280" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23stars)"/></svg>')}
        .pattern-option.waves{background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="waves" x="0" y="0" width="30" height="30" patternUnits="userSpaceOnUse"><path d="M0,15 Q15,5 30,15 T60,15 T90,15 T120,15" stroke="%236b7280" stroke-width="2" fill="none" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23waves)"/></svg>')}
        .pattern-option.geometric{background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="geometric" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><rect x="0" y="0" width="10" height="10" fill="%236b7280" opacity="0.1"/><rect x="10" y="10" width="10" height="10" fill="%236b7280" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23geometric)"/></svg>')}
        
        .help-section{display:none}
        .help-section.active{display:block}
        .help-tabs{display:flex;gap:6px;padding:12px;background:var(--bg-secondary);border-bottom:var(--border);overflow-x:auto}
        .help-tab{padding:10px 14px;border:2px solid #e5e7eb;border-radius:12px;background:white;color:var(--text);font-weight:600;white-space:nowrap;cursor:pointer;transition:all 0.2s ease;font-size:12px;flex-shrink:0;min-height:44px}
        .help-tab.active{background:var(--button-bg);color:white;border-color:var(--primary)}
        .help-content{padding:16px}
        .help-item{margin-bottom:20px}
        .help-item h3{font-size:16px;font-weight:700;margin-bottom:8px;color:var(--text)}
        .help-item p{font-size:14px;color:var(--text-light);line-height:1.5;margin-bottom:8px}
        .help-item ul{margin-left:20px;color:var(--text-light)}
        .help-item li{font-size:14px;margin-bottom:4px;line-height:1.4}
        
        .order-summary{background:#f8f9fa;padding:16px;border-radius:var(--radius);margin-bottom:16px;border:var(--border)}
        .summary-row{display:flex;justify-content:space-between;margin-bottom:8px;font-size:14px}
        .summary-row.total{font-weight:700;font-size:16px;border-top:1px solid #e5e7eb;padding-top:8px;margin-top:8px}
        
        .sortable-handle{cursor:grab;padding:8px;color:var(--text-light);min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}
        .sortable-handle:active{cursor:grabbing}
        .sortable-ghost{opacity:0.4}
        
        .quick-actions{display:flex;gap:8px;padding:12px 16px;background:var(--bg-secondary);border-bottom:var(--border);overflow-x:auto}
        .quick-action-btn{padding:12px 16px;background:white;border:var(--border);border-radius:12px;color:var(--text);font-weight:600;white-space:nowrap;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:6px;font-size:13px;flex-shrink:0;min-height:44px}
        .quick-action-btn:hover{background:var(--primary-light);border-color:var(--primary)}
        .quick-action-btn.primary{background:var(--primary);color:white;border-color:var(--primary)}
        
        .help-view{display:none;background:var(--bg);min-height:100vh}
        .help-header{background:var(--header-bg);color:white;padding:18px 20px;display:flex;justify-content:space-between;align-items:center;border-bottom:var(--border)}
        .help-title{font-size:18px;font-weight:700}
        .help-back{background:rgba(255,255,255,0.2);border:1px solid rgba(255,255,255,0.3);color:white;padding:8px 14px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;display:flex;align-items:center;gap:6px;font-size:13px;min-height:44px}
        .help-back:hover{background:rgba(255,255,255,0.3)}
        
        .pagination{display:flex;justify-content:center;gap:8px;margin-top:16px}
        .page-btn{padding:10px 14px;border:1px solid #e5e7eb;border-radius:8px;background:white;color:var(--text);cursor:pointer;font-size:12px;font-weight:600;min-height:44px}
        .page-btn.active{background:var(--primary);color:white;border-color:var(--primary)}
        .page-btn:disabled{opacity:0.5;cursor:not-allowed}
        
        .dangerous-section{background:linear-gradient(135deg,#fee2e2 0%,#fecaca 100%);border:2px solid #fca5a5;border-radius:var(--radius);padding:16px;margin-bottom:16px}
        .dangerous-title{color:#dc2626;font-size:16px;font-weight:700;margin-bottom:8px;display:flex;align-items:center;gap:6px}
        .dangerous-description{color:#991b1b;font-size:13px;margin-bottom:12px}
        .dangerous-input{width:100%;padding:12px;border:2px solid #fca5a5;border-radius:10px;font-size:13px;margin-bottom:12px;min-height:44px}
        .dangerous-btn{background:linear-gradient(135deg,#dc2626 0%,#b91c1c 100%);color:white;border:none;border-radius:10px;padding:12px 16px;font-weight:700;cursor:pointer;transition:all 0.2s ease;min-height:44px}
        .dangerous-btn:hover{transform:translateY(-2px)}
        
        .promo-form{background:white;padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:16px;border:var(--border)}
        .promo-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
        .promo-full{grid-column:1/-1}
        
        .move-buttons{display:flex;gap:4px}
        .move-btn{padding:6px;border:1px solid #e5e7eb;border-radius:6px;background:white;cursor:pointer;color:var(--text-light);min-height:44px;min-width:44px;display:flex;align-items:center;justify-content:center}
        .move-btn:hover{background:#f8f9fa}
        
        .promo-field{display:flex;align-items:center;gap:8px}
        .promo-discount{display:flex;align-items:center;gap:4px}

        .status-modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:3000;justify-content:center;align-items:center;padding:16px}
        .status-modal-content{background:white;border-radius:var(--radius-lg);padding:20px;max-width:320px;width:100%;box-shadow:var(--shadow-lg)}
        .status-option{padding:12px 16px;border:2px solid #e5e7eb;border-radius:10px;margin-bottom:8px;cursor:pointer;transition:all 0.2s ease;min-height:44px}
        .status-option:hover{background:#f8f9fa}
        .status-option.selected{border-color:var(--primary);background:var(--primary-light)}

        .dropdown { width:100%; position:relative }
        .dropdown-toggle { width:100%; padding:14px; border:2px solid #e5e7eb; border-radius:12px; background:white; text-align:left; cursor:pointer; display:flex; justify-content:space-between; align-items:center; min-height:48px; font-weight:500; transition:all 0.2s ease }
        .dropdown-toggle:hover { border-color:#9ca3af }
        .dropdown-menu { display:none; position:absolute; top:100%; left:0; right:0; background:white; border:2px solid #e5e7eb; border-radius:12px; box-shadow:0 10px 25px rgba(0,0,0,0.15); z-index:1000; max-height:200px; overflow-y:auto; margin-top:4px }
        .dropdown-menu.show { display:block; animation:dropdownSlide 0.2s ease }
        @keyframes dropdownSlide{from{opacity:0;transform:translateY(-10px)} to{opacity:1;transform:translateY(0)}}
        .dropdown-item { padding:14px 16px; cursor:pointer; transition:all 0.2s ease; border-bottom:1px solid #f0f0f0; display:flex; align-items:center; gap:8px; min-height:48px }
        .dropdown-item:last-child { border-bottom:none }
        .dropdown-item:hover { background:#f8f9fa }
        .dropdown-item.selected { background:#f3f4f6; color:#374151 }
        .form-input-placeholder { font-size:12px; color:#6b7280; margin-top:6px; line-height:1.4 }
        
        .category-form{background:white;padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:16px;border:var(--border)}
        .icon-scroll-container{max-height:200px;overflow-y:auto;border:1px solid #e5e7eb;border-radius:8px;padding:8px;margin-top:8px}
        .icon-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px}
        .icon-option{padding:12px;border:2px solid #e5e7eb;border-radius:8px;cursor:pointer;text-align:center;transition:all 0.2s ease;min-height:44px}
        .icon-option.selected{border-color:var(--primary);background:var(--primary-light)}
        .icon-option i{font-size:18px;margin-bottom:4px}
        
        .product-status{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;border-radius:6px;font-size:10px;font-weight:700}
        .status-active{background:#dcfce7;color:#166534}
        .status-inactive{background:#fecaca;color:#dc2626;text-decoration:line-through}
        
        .table-image{width:40px;height:40px;border-radius:8px;object-fit:cover}
        .table-product-image{width:60px;height:60px;border-radius:8px;object-fit:cover}
        
        .skeleton{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0 50%,#f0f0f0 75%);background-size:200% 100%;animation:loading 1.5s infinite}
        @keyframes loading{0%{background-position:200% 0} 100%{background-position:-200% 0}}
        .skeleton-text{height:12px;border-radius:4px;margin-bottom:8px}
        .skeleton-image{width:100%;height:180px;border-radius:var(--radius)}
        
        .dark-mode{display:none}

        .edit-category-form{background:white;padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);margin-bottom:16px;border:var(--border)}
        .edit-category-form .form-title{margin-bottom:16px}
        
        .collapsible-section{margin-bottom:16px}
        .collapsible-header{background:white;padding:16px;border-radius:var(--radius);box-shadow:var(--shadow);border:var(--border);cursor:pointer;display:flex;justify-content:space-between;align-items:center}
        .collapsible-header h3{font-size:16px;font-weight:700;color:var(--text);margin:0}
        .collapsible-header i{transition:transform 0.3s ease}
        .collapsible-content{max-height:0;overflow:hidden;transition:max-height 0.3s ease}
        .collapsible-section.expanded .collapsible-content{max-height:2000px}
        .collapsible-section.expanded .collapsible-header i{transform:rotate(180deg)}
        
        .confirmation-modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);z-index:4000;justify-content:center;align-items:center;padding:16px;backdrop-filter:blur(5px)}
        .confirmation-content{background:white;border-radius:var(--radius-lg);padding:20px;max-width:320px;width:100%;box-shadow:var(--shadow-lg);text-align:center}
        .confirmation-icon{font-size:48px;color:#ef4444;margin-bottom:16px}
        .confirmation-title{font-size:18px;font-weight:700;margin-bottom:8px;color:var(--text)}
        .confirmation-message{color:var(--text-light);margin-bottom:20px;line-height:1.4}
        .confirmation-actions{display:flex;gap:12px;justify-content:center}
        .confirmation-btn{flex:1;padding:12px 16px;border:none;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;min-height:44px}
        .confirmation-btn.cancel{background:#6b7280;color:white}
        .confirmation-btn.confirm{background:#ef4444;color:white}
        .confirmation-btn:hover{transform:translateY(-1px)}
        
        .product-inactive{background:#fef2f2;border:2px solid #fecaca}
        .category-inactive{background:#fef2f2;border:2px solid #fecaca}
        
        .form-input { width:100%; padding:14px; border:2px solid #e5e7eb; border-radius:12px; font-size:14px; transition:all 0.2s ease; background:white; min-height:48px; font-weight:500 }}
        .product-no-category{border-left:3px solid #6b7280;opacity:0.8}
        .admin-tab-content{display:none}.admin-tab-content.active{display:block}
        .dangerous-modal{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.7);display:none;justify-content:center;align-items:center;z-index:4000;padding:16px;backdrop-filter:blur(5px)}
        .dangerous-modal-content{background:white;border-radius:var(--radius-lg);padding:20px;max-width:320px;width:100%;box-shadow:var(--shadow-lg);text-align:center}
        .dangerous-modal-icon{font-size:48px;color:#ef4444;margin-bottom:16px}
        .dangerous-modal-title{font-size:18px;font-weight:700;margin-bottom:8px;color:var(--text)}
        .dangerous-modal-message{color:var(--text-light);margin-bottom:20px;line-height:1.4}
        .dangerous-modal-actions{display:flex;gap:12px;justify-content:center}
        .dangerous-modal-btn{flex:1;padding:12px 16px;border:none;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s ease;min-height:44px}
        .dangerous-modal-btn.cancel{background:#6b7280;color:white}
        .dangerous-modal-btn.confirm{background:#ef4444;color:white}
        .dangerous-modal-btn:hover{transform:translateY(-1px)}

        #loadingScreen{position:fixed;top:0;left:0;width:100%;height:100%;background-color:white;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:10000;transition:opacity 0.8s ease,visibility 0.8s ease;}
        .loading-logo{width:150px;height:150px;border-radius:50%;object-fit:cover;margin-bottom:25px;box-shadow:0 8px 20px rgba(0,0,0,0.15);border:4px solid white;}
        .loading-title{font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;font-size:18px;font-weight:600;color:#333;text-align:center;margin-bottom:40px;max-width:300px;line-height:1.4;padding:0 20px;}
        .loading-container{width:80%;max-width:350px;position:absolute;bottom:60px;}
        .progress-track{width:100%;height:30px;background-color:white;border:3px solid #000;border-radius:50px;overflow:hidden;position:relative;}
        .progress-fill{height:100%;width:0;background-color:hsl(98,23%,36%);background-image:linear-gradient(45deg,rgba(255,255,255,0.2) 25%,transparent 25%,transparent 50%,rgba(255,255,255,0.2) 50%,rgba(255,255,255,0.2) 75%,transparent 75%,transparent);background-size:30px 30px;box-shadow:inset 0 2px 8px rgba(0,0,0,0.3);animation:fill-bar 3s linear forwards,move-stripes 1s linear infinite;}
        @keyframes fill-bar{from{width:0%;}to{width:100%;}}
        @keyframes move-stripes{from{background-position:0 0;}to{background-position:30px 0;}}
    </style>
</head>
<body>
    <div class="snow-container" id="snowContainer"></div>
    <div class="rain-container" id="rainContainer"></div>
    <div class="confetti-container" id="confettiContainer"></div>
    <div class="night-container" id="nightContainer"></div>

    <div id="loadingScreen">
        <img src="https://raw.githubusercontent.com/Fallout-rtg/flowershop/main/ArtFlora.jpg" alt="–ê—Ä—Ç–§–ª–æ—Ä–∞" class="loading-logo">
        <div class="loading-title">–ê—Ä—Ç–§–ª–æ—Ä–∞ - –∫–æ–≥–¥–∞ —Ü–≤–µ—Ç—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∏—Å–∫—É—Å—Å—Ç–≤–æ–º!</div>
        <div class="loading-container">
            <div class="progress-track">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>
    
    <div class="app-container">
        <div class="toast" id="toast">
            <i class="fas fa-check-circle" id="toastIcon"></i>
            <span id="toastMessage">–î–æ–±–∞–≤–ª–µ–Ω–æ</span>
        </div>

        <div class="customer-view" id="customerView">
            <div class="header dots" id="shopHeader">
                <div class="header-content">
                    <h1 id="shopName">üå∏ Flower Shop</h1>
                    <p id="shopSubtitle">–≠–ª–∏—Ç–Ω—ã–µ –±—É–∫–µ—Ç—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –Ø—Ä–æ—Å–ª–∞–≤–ª—é</p>
                    <div class="delivery-info">
                        <i class="fas fa-shipping-fast"></i>
                        <span id="deliveryInfoText">–î–æ—Å—Ç–∞–≤–∫–∞ 200‚ÇΩ ‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç 3000‚ÇΩ</span>
                    </div>
                </div>
            </div>

            <div class="delivery-banner">
                <i class="fas fa-clock"></i>
                <span id="workingHoursText">–î–æ—Å—Ç–∞–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 20:00</span>
            </div>

            <div class="categories" id="categoriesContainer">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <div>–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...</div>
                </div>
            </div>

            <div class="products-grid" id="productsGrid">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <div>–ó–∞–≥—Ä—É–∂–∞–µ–º –∫–∞—Ç–∞–ª–æ–≥...</div>
                </div>
            </div>
        </div>

        <div class="admin-panel" id="adminPanel">
            <div class="admin-header">
                <div class="admin-title">üõ†Ô∏è –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</div>
                <button class="admin-switch" onclick="switchToCustomerView()">
                    <i class="fas fa-store"></i> –ú–∞–≥–∞–∑–∏–Ω
                </button>
            </div>

            <div class="admin-tabs">
                <div class="admin-tab active" data-tab="dashboard">
                    <i class="fas fa-chart-bar"></i>–ì–ª–∞–≤–Ω–∞—è
                </div>
                <div class="admin-tab" data-tab="products">
                    <i class="fas fa-shopping-bag"></i>–¢–æ–≤–∞—Ä—ã
                </div>
                <div class="admin-tab" data-tab="orders">
                    <i class="fas fa-clipboard-list"></i>–ó–∞–∫–∞–∑—ã
                </div>
                <div class="admin-tab" data-tab="promocodes">
                    <i class="fas fa-tag"></i>–ü—Ä–æ–º–æ–∫–æ–¥—ã
                </div>
                <div class="admin-tab" data-tab="admins">
                    <i class="fas fa-users"></i>–ê–¥–º–∏–Ω—ã
                </div>
                <div class="admin-tab" data-tab="settings">
                    <i class="fas fa-cog"></i>–ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </div>
                <div class="admin-tab" data-tab="help">
                    <i class="fas fa-question-circle"></i>–ü–æ–º–æ—â—å
                </div>
                <div class="admin-tab" data-tab="export">
                    <i class="fas fa-file-export"></i>–≠–∫—Å–ø–æ—Ä—Ç
                </div>
                <div class="admin-tab" data-tab="dangerous" id="dangerousTabButton" style="display: none;">
                    <i class="fas fa-skull-crossbones"></i>–û–ø–∞—Å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                </div>
            </div>

            <div class="admin-content">
                <div class="admin-tab-content active" id="dashboardTab">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="totalOrders">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="completedOrders">0</div>
                            <div class="stat-label">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalRevenue">0 ‚ÇΩ</div>
                            <div class="stat-label">–†–µ–∞–ª—å–Ω–∞—è –≤—ã—Ä—É—á–∫–∞</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="potentialRevenue">0 ‚ÇΩ</div>
                            <div class="stat-label">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="totalProducts">0</div>
                            <div class="stat-label">–¢–æ–≤–∞—Ä–æ–≤</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="activePromocodes">0</div>
                            <div class="stat-label">–ü—Ä–æ–º–æ–∫–æ–¥–æ–≤</div>
                        </div>
                    </div>

                    <div class="quick-actions">
                        <button class="quick-action-btn primary" onclick="loadAdminData()">
                            <i class="fas fa-sync-alt"></i> –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                        <button class="quick-action-btn" onclick="showTab('products')">
                            <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
                        </button>
                        <button class="quick-action-btn" onclick="showTab('orders')">
                            <i class="fas fa-eye"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤
                        </button>
                    </div>
                </div>
                
                <div class="admin-tab-content" id="productsTab">
                    <div class="product-form">
                        <div class="form-title" onclick="toggleProductForm()">
                            <i class="fas fa-chevron-down" id="productFormIcon"></i>
                            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä
                        </div>
                        <div class="collapsible-content" id="productFormContent">
                            <div class="form-row">
                                <input type="text" id="productName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" class="form-input">
                                <input type="number" id="productPrice" placeholder="–¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö" class="form-input">
                            </div>
                            <div class="form-row">
                                <input type="text" id="productImage" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" class="form-input">
                                <div class="dropdown">
                                    <div class="dropdown-toggle" id="categoryDropdownToggle">
                                        <span>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="dropdown-menu" id="categoryDropdown">
                                    </div>
                                </div>
                            </div>
                            <div class="form-row form-full">
                                <textarea id="productDescription" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" class="form-input" rows="2"></textarea>
                            </div>
                            <div class="form-row form-full">
                                <textarea id="productFact" placeholder="–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç –æ —Ü–≤–µ—Ç–∞—Ö" class="form-input" rows="2"></textarea>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="productFeatured">
                                <label class="checkbox-label">–•–∏—Ç —Ç–æ–≤–∞—Ä (–±–µ–π–¥–∂ "–•–∏—Ç")</label>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-primary btn-lg" onclick="addProduct()">
                                    <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–≤–∞—Ä
                                </button>
                                <button class="btn btn-secondary" onclick="resetProductForm()">
                                    <i class="fas fa-times"></i> –û—á–∏—Å—Ç–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="category-form">
                        <div class="form-title" onclick="toggleCategoryForm()">
                            <i class="fas fa-chevron-down" id="categoryFormIcon"></i>
                            üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
                        </div>
                        <div class="collapsible-content" id="categoryFormContent">
                            <div class="form-row">
                                <input type="text" id="categoryName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" class="form-input">
                                <input type="text" id="categorySlug" placeholder="Slug (–∞–Ω–≥–ª.)" class="form-input">
                            </div>
                            <div class="form-full">
                                <label class="form-label">–í—ã–±–µ—Ä–∏—Ç–µ –∏–∫–æ–Ω–∫—É:</label>
                                <div class="icon-scroll-container">
                                    <div class="icon-grid" id="iconGrid">
                                        <div class="icon-option" data-icon="fas fa-heart">
                                            <i class="fas fa-heart"></i>
                                            <div>–°–µ—Ä–¥—Ü–µ</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-star">
                                            <i class="fas fa-star"></i>
                                            <div>–ó–≤–µ–∑–¥–∞</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-sun">
                                            <i class="fas fa-sun"></i>
                                            <div>–°–æ–ª–Ω—Ü–µ</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-moon">
                                            <i class="fas fa-moon"></i>
                                            <div>–õ—É–Ω–∞</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-leaf">
                                            <i class="fas fa-leaf"></i>
                                            <div>–õ–∏—Å—Ç</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-spa">
                                            <i class="fas fa-spa"></i>
                                            <div>–¶–≤–µ—Ç–æ–∫</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-seedling">
                                            <i class="fas fa-seedling"></i>
                                            <div>–†–æ—Å—Ç–æ–∫</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-feather">
                                            <i class="fas fa-feather"></i>
                                            <div>–ü–µ—Ä–æ</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-cloud">
                                            <i class="fas fa-cloud"></i>
                                            <div>–û–±–ª–∞–∫–æ</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-fire">
                                            <i class="fas fa-fire"></i>
                                            <div>–û–≥–æ–Ω—å</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-water">
                                            <i class="fas fa-tint"></i>
                                            <div>–í–æ–¥–∞</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-snowflake">
                                            <i class="fas fa-snowflake"></i>
                                            <div>–°–Ω–µ–≥</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-tree">
                                            <i class="fas fa-tree"></i>
                                            <div>–î–µ—Ä–µ–≤–æ</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-mountain">
                                            <i class="fas fa-mountain"></i>
                                            <div>–ì–æ—Ä–∞</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-umbrella">
                                            <i class="fas fa-umbrella"></i>
                                            <div>–ó–æ–Ω—Ç</div>
                                        </div>
                                        <div class="icon-option" data-icon="fas fa-gem">
                                            <i class="fas fa-gem"></i>
                                            <div>–ö—Ä–∏—Å—Ç–∞–ª–ª</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-primary" onclick="addCategory()">
                                    <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible-section" id="productsSection">
                        <div class="collapsible-header" onclick="toggleSection('productsSection')">
                            <h3><i class="fas fa-shopping-bag"></i> –¢–æ–≤–∞—Ä—ã</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="collapsible-content">
                            <div class="search-box">
                                <input type="text" id="productSearch" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—é –∏–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏..." class="search-input" onkeyup="filterProducts()">
                                <div class="filter-buttons">
                                    <button class="filter-btn active" data-status="all">–í—Å–µ —Ç–æ–≤–∞—Ä—ã</button>
                                    <button class="filter-btn" data-status="active">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                                    <button class="filter-btn" data-status="inactive">–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ</button>
                                </div>
                            </div>

                            <div class="admin-table-container">
                                <table class="admin-table">
                                    <thead>
                                        <tr class="table-header">
                                            <th>ID</th>
                                            <th>–ò–∑–æ–±—Ä.</th>
                                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                            <th>–¶–µ–Ω–∞</th>
                                            <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                            <th>–°—Ç–∞—Ç—É—Å</th>
                                            <th>–ü–æ—Ä—è–¥–æ–∫</th>
                                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        </tr>
                                    </thead>
                                    <tbody id="productsList">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="collapsible-section" id="categoriesSection">
                        <div class="collapsible-header" onclick="toggleSection('categoriesSection')">
                            <h3><i class="fas fa-folder"></i> –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="collapsible-content">
                            <div class="admin-table-container">
                                <table class="admin-table">
                                    <thead>
                                        <tr class="table-header">
                                            <th>ID</th>
                                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                            <th>Slug</th>
                                            <th>–ò–∫–æ–Ω–∫–∞</th>
                                            <th>–°—Ç–∞—Ç—É—Å</th>
                                            <th>–ü–æ—Ä—è–¥–æ–∫</th>
                                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                        </tr>
                                    </thead>
                                    <tbody id="categoriesList">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="admin-tab-content" id="ordersTab">
                    <div class="search-box">
                        <input type="text" id="orderSearch" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ ID, –∏–º–µ–Ω–∏ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É..." class="search-input" onkeyup="filterOrders()">
                        <div class="filter-buttons">
                            <button class="filter-btn active" data-status="all">–í—Å–µ –∑–∞–∫–∞–∑—ã</button>
                            <button class="filter-btn" data-status="1">–ù–æ–≤—ã–µ</button>
                            <button class="filter-btn" data-status="2">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã</button>
                            <button class="filter-btn" data-status="3">–°–æ–±–∏—Ä–∞—é—Ç—Å—è</button>
                            <button class="filter-btn" data-status="4">–í –ø—É—Ç–∏</button>
                            <button class="filter-btn" data-status="5">–î–æ—Å—Ç–∞–≤–ª–µ–Ω—ã</button>
                            <button class="filter-btn" data-status="6">–û—Ç–º–µ–Ω–µ–Ω—ã</button>
                        </div>
                    </div>

                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr class="table-header">
                                    <th>ID</th>
                                    <th>–ö–ª–∏–µ–Ω—Ç</th>
                                    <th>–°—É–º–º–∞</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="ordersList">
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="pagination" id="ordersPagination"></div>
                </div>

                <div class="admin-tab-content" id="promocodesTab">
                    <div class="promo-form" id="promoFormContainer">
                        <div class="form-title" onclick="togglePromoForm()">
                            <i class="fas fa-chevron-down" id="promoFormIcon"></i>
                            üè∑Ô∏è –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
                        </div>
                        <div class="collapsible-content" id="promoFormContent">
                            <div class="promo-row">
                                <input type="text" id="promoCode" placeholder="–ö–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞" class="form-input">
                                <div class="dropdown">
                                    <div class="dropdown-toggle" id="discountTypeDropdownToggle">
                                        <span>–¢–∏–ø —Å–∫–∏–¥–∫–∏</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="dropdown-menu" id="discountTypeDropdown">
                                        <div class="dropdown-item" data-value="percentage">–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è</div>
                                        <div class="dropdown-item" data-value="fixed">–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è</div>
                                    </div>
                                </div>
                            </div>
                            <div class="promo-row">
                                <div class="promo-field">
                                    <input type="number" id="promoDiscountValue" placeholder="–ó–Ω–∞—á–µ–Ω–∏–µ" class="form-input">
                                    <span id="promoDiscountSuffix">%</span>
                                </div>
                                <input type="number" id="promoMinOrder" placeholder="–ú–∏–Ω. —Å—É–º–º–∞" class="form-input">
                            </div>
                            <div class="promo-row">
                                <input type="number" id="promoMaxUses" placeholder="–õ–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π" class="form-input">
                                <input type="date" id="promoValidUntil" class="form-input">
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-primary" onclick="addPromocode()">
                                    <i class="fas fa-tag"></i> –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥
                                </button>
                                <button class="btn btn-secondary" onclick="resetPromoForm()">
                                    <i class="fas fa-times"></i> –û—á–∏—Å—Ç–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr class="table-header">
                                    <th>–ö–æ–¥</th>
                                    <th>–°–∫–∏–¥–∫–∞</th>
                                    <th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="promocodesList">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="admin-tab-content" id="adminsTab">
                    <div class="product-form" id="adminFormContainer">
                        <div class="form-title" onclick="toggleAdminForm()">
                            <i class="fas fa-chevron-down" id="adminFormIcon"></i>
                            üë§ –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                        </div>
                        <div class="collapsible-content" id="adminFormContent">
                            <div class="form-row">
                                <input type="text" id="adminTelegramId" placeholder="Telegram ID" class="form-input">
                                <input type="text" id="adminUsername" placeholder="Username (@nickname)" class="form-input">
                            </div>
                            <div class="form-row">
                                <input type="text" id="adminFirstName" placeholder="–ò–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞" class="form-input">
                                <div class="dropdown">
                                    <div class="dropdown-toggle" id="roleDropdownToggle">
                                        <span>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å</span>
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                    <div class="dropdown-menu" id="roleDropdown">
                                        <div class="dropdown-item" data-value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                                        <div class="dropdown-item" data-value="owner">–í–ª–∞–¥–µ–ª–µ—Ü</div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-primary" onclick="addAdmin()">
                                    <i class="fas fa-user-plus"></i> –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
                                </button>
                                <button class="btn btn-secondary" onclick="resetAdminForm()">
                                    <i class="fas fa-times"></i> –û—á–∏—Å—Ç–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="admin-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr class="table-header">
                                    <th>ID</th>
                                    <th>–ò–º—è</th>
                                    <th>Username</th>
                                    <th>–†–æ–ª—å</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="adminsList">
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="admin-tab-content" id="settingsTab">
                    <div class="product-form">
                        <div class="form-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞</div>
                        
                        <div class="settings-group">
                            <div class="settings-label">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                            <div class="settings-row">
                                <input type="text" id="shopNameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞" class="settings-input">
                                <input type="text" id="shopPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" class="settings-input">
                            </div>
                            <div class="settings-full">
                                <input type="text" id="shopSubtitleInput" placeholder="–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–∞–≥–∞–∑–∏–Ω–∞" class="settings-input">
                            </div>
                            <div class="settings-full">
                                <input type="text" id="shopAddress" placeholder="–ê–¥—Ä–µ—Å –º–∞–≥–∞–∑–∏–Ω–∞" class="settings-input">
                            </div>
                            <div class="settings-full">
                                <textarea id="shopWorkingHours" placeholder="–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã" class="settings-input" rows="2"></textarea>
                            </div>
                        </div>

                        <div class="settings-group">
                            <div class="settings-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏</div>
                            <div class="settings-row">
                                <input type="number" id="deliveryPrice" placeholder="–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏" class="settings-input">
                                <input type="number" id="freeDeliveryMin" placeholder="–ë–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç —Å—É–º–º—ã" class="settings-input">
                            </div>
                        </div>

                        <div class="settings-group">
                            <div class="settings-label">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞</div>
                            <div class="theme-grid" id="themeGrid"></div>
                        </div>

                        <div class="settings-group">
                            <div class="settings-label">–£–∑–æ—Ä —à–∞–ø–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞</div>
                            <div class="pattern-grid" id="patternGrid">
                                <div class="pattern-option dots" data-pattern="dots">–ì–æ—Ä–æ—à–µ–∫</div>
                                <div class="pattern-option lines" data-pattern="lines">–ü–æ–ª–æ—Å–∫–∏</div>
                                <div class="pattern-option flowers" data-pattern="flowers">–¶–≤–µ—Ç–æ—á–∫–∏</div>
                                <div class="pattern-option hearts" data-pattern="hearts">–°–µ—Ä–¥–µ—á–∫–∏</div>
                                <div class="pattern-option stars" data-pattern="stars">–ó–≤–µ–∑–¥—ã</div>
                                <div class="pattern-option waves" data-pattern="waves">–í–æ–ª–Ω—ã</div>
                                <div class="pattern-option geometric" data-pattern="geometric">–ì–µ–æ–º–µ—Ç—Ä–∏—è</div>
                            </div>
                        </div>

                        <div class="settings-group">
                            <div class="settings-label">–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã</div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="snowEffect">
                                <label class="checkbox-label">‚ùÑÔ∏è –°–Ω–µ–≥–æ–ø–∞–¥ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="rainEffect">
                                <label class="checkbox-label">üåßÔ∏è –î–æ–∂–¥—å –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="confettiEffect">
                                <label class="checkbox-label">üéâ –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</label>
                            </div>
                            <div class="checkbox-group">
                                <input type="checkbox" id="nightEffect">
                                <label class="checkbox-label">üåô –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π</label>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button class="btn btn-primary btn-lg" onclick="saveShopSettings()">
                                <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                        </div>
                    </div>
                </div>

                <div class="admin-tab-content" id="helpTab">
                    <div class="help-content">
                        <div class="help-item">
                            <h3>üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –±–æ—Ç–æ–º</h3>
                            <p>–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–∞—à–∏–º —Ü–≤–µ—Ç–æ—á–Ω—ã–º –º–∞–≥–∞–∑–∏–Ω–æ–º —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞.</p>
                        </div>

                        <div class="help-item">
                            <h3>üõçÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h3>
                            <p><strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤:</strong></p>
                            <ul>
                                <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–¢–æ–≤–∞—Ä—ã"</li>
                                <li>–ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä"</li>
                                <li>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è</li>
                                <li>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞</li>
                                <li>–£–∫–∞–∂–∏—Ç–µ —Ü–µ–Ω—É –∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</li>
                            </ul>
                            <p><strong>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏:</strong></p>
                            <ul>
                                <li>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏</li>
                                <li>–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</li>
                                <li>–£–¥–∞–ª—è–π—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</li>
                                <li>–ù–∞–∑–Ω–∞—á–∞–π—Ç–µ —Ç–æ–≤–∞—Ä–∞–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</li>
                            </ul>
                            <p><strong>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö/–Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</p>
                        </div>

                        <div class="help-item">
                            <h3>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</h3>
                            <p><strong>–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑—ã:</strong></p>
                            <ul>
                                <li>–í—Å–µ –∑–∞–∫–∞–∑—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ "–ó–∞–∫–∞–∑—ã"</li>
                                <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º</li>
                                <li>–ü–æ–∏—Å–∫ –ø–æ ID, –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É</li>
                            </ul>
                            <p><strong>–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤:</strong> –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –¥–ª—è –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</p>
                        </div>

                        <div class="help-item">
                            <h3>üè∑Ô∏è –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤</h3>
                            <p><strong>–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤:</strong></p>
                            <ul>
                                <li>–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤</li>
                                <li>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–∏–ø —Å–∫–∏–¥–∫–∏ (–ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –∏–ª–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è)</li>
                                <li>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ª–∏–º–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</li>
                            </ul>
                            <p><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤:</strong> –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –≤–≤–æ–¥–∏—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥—ã –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞</p>
                        </div>

                        <div class="help-item">
                            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞</h3>
                            <p><strong>–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:</strong></p>
                            <ul>
                                <li>–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫</li>
                                <li>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∞–¥—Ä–µ—Å</li>
                                <li>–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ —É—Å–ª–æ–≤–∏—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏</li>
                                <li>–í—ã–±–æ—Ä —Ç–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</li>
                                <li>–í—ã–±–æ—Ä —É–∑–æ—Ä–∞ –¥–ª—è —à–∞–ø–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞</li>
                                <li>–í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Å–Ω–µ–≥–æ–ø–∞–¥–∞, –¥–æ–∂–¥—è, –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –∏ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ</li>
                            </ul>
                        </div>

                        <div class="help-item">
                            <h3>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏</h3>
                            <p><strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:</strong></p>
                            <ul>
                                <li>–¢–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</li>
                                <li>–£–∫–∞–∂–∏—Ç–µ Telegram ID –∏ –∏–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</li>
                                <li>–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏–ª–∏ –≤–ª–∞–¥–µ–ª–µ—Ü</li>
                            </ul>
                        </div>

                        <div class="help-item">
                            <h3>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                            <p><strong>–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:</strong></p>
                            <ul>
                                <li>–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</li>
                                <li>–†–µ–∞–ª—å–Ω–∞—è –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –≤—ã—Ä—É—á–∫–∞</li>
                                <li>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –∏ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤</li>
                            </ul>
                        </div>

                        <div class="admin-tab-content" id="exportTab">
                            <div class="product-form">
                                <div class="form-title"><i class="fas fa-file-excel"></i> –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</div>
                                <div class="form-group">
                                    <p style="color: var(--text-light); margin-bottom: 20px;">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–∫–∞–∑—ã –≤ —Ñ–∞–π–ª Excel. –û—Ç—á–µ—Ç –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤–∞–º –≤ Telegram.</p>
                                </div>
                                <button class="checkout-btn" onclick="exportToExcel()" id="exportBtn">
                                    <i class="fas fa-file-excel"></i> –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Excel
                                </button>
                                <div id="exportStatus" style="margin-top: 15px; font-size: 13px;"></div>
                            </div>
                        </div>

                        <div class="help-item">
                            <h3>‚ö†Ô∏è –û–ø–∞—Å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                            <p><strong>–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤:</strong></p>
                            <ul>
                                <li>–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤</li>
                                <li>–°–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</li>
                                <li>–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤</li>
                                <li>–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤</li>
                                <li>–û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</li>
                            </ul>
                            <p>–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–æ–¥ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è.</p>
                        </div>
                    </div>
                </div>

                <div class="admin-tab-content" id="dangerousTab"><div class="dangerous-section"><div class="dangerous-title"><i class="fas fa-exclamation-triangle"></i>–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤</div><div class="dangerous-description">–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç –≤—Å–µ –∑–∞–∫–∞–∑—ã –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.</div><input type="text" class="dangerous-input" id="reset_ordersCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"><button class="dangerous-btn" onclick="dangerousAction('reset_orders')"><i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–∫–∞–∑—ã</button></div><div class="dangerous-section"><div class="dangerous-title"><i class="fas fa-exclamation-triangle"></i>–°–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏</div><div class="dangerous-description">–û–±–Ω—É–ª–∏—Ç –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—ã—Ä—É—á–∫–∏ –∏ –ø—Ä–∏–±—ã–ª–∏. –ó–∞–∫–∞–∑—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è, –Ω–æ –∏—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç —Å–±—Ä–æ—à–µ–Ω—ã.</div><input type="text" class="dangerous-input" id="reset_statsCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"><button class="dangerous-btn" onclick="dangerousAction('reset_stats')"><i class="fas fa-chart-line"></i> –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button></div><div class="dangerous-section"><div class="dangerous-title"><i class="fas fa-exclamation-triangle"></i>–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤</div><div class="dangerous-description">–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç –≤—Å–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.</div><input type="text" class="dangerous-input" id="delete_promocodesCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"><button class="dangerous-btn" onclick="dangerousAction('delete_promocodes')"><i class="fas fa-tags"></i> –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã</button></div><div class="dangerous-section"><div class="dangerous-title"><i class="fas fa-exclamation-triangle"></i>–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤</div><div class="dangerous-description">–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞. –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.</div><input type="text" class="dangerous-input" id="delete_productsCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"><button class="dangerous-btn" onclick="dangerousAction('delete_products')"><i class="fas fa-boxes"></i> –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã</button></div><div class="dangerous-section"><div class="dangerous-title"><i class="fas fa-exclamation-triangle"></i>–û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</div><div class="dangerous-description">–£–¥–∞–ª–∏—Ç –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è.</div><input type="text" class="dangerous-input" id="clear_customersCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"><button class="dangerous-btn" onclick="dangerousAction('clear_customers')"><i class="fas fa-users"></i> –û—á–∏—Å—Ç–∏—Ç—å –±–∞–∑—É –∫–ª–∏–µ–Ω—Ç–æ–≤</button></div><div class="dangerous-section"><div class="dangerous-title"><i class="fas fa-exclamation-triangle"></i>–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –º–∞–≥–∞–∑–∏–Ω–∞</div><div class="dangerous-description">–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç –≤—Å—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–∞. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.</div><input type="text" class="dangerous-input" id="reset_shopCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"><button class="dangerous-btn" onclick="dangerousAction('reset_shop')"><i class="fas fa-bomb"></i> –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –º–∞–≥–∞–∑–∏–Ω–∞</button></div></div>
            </div>
        </div>

        <div class="help-view" id="helpView">
            <div class="help-header">
                <div class="help-title">‚ùì –ü–æ–º–æ—â—å –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</div>
                <button class="help-back" onclick="switchToCustomerView()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –≤ –º–∞–≥–∞–∑–∏–Ω
                </button>
            </div>

            <div class="help-tabs">
                <div class="help-tab active" data-help="ordering">üõçÔ∏è –ö–∞–∫ –∑–∞–∫–∞–∑–∞—Ç—å</div>
                <div class="help-tab" data-help="delivery">üöö –î–æ—Å—Ç–∞–≤–∫–∞</div>
                <div class="help-tab" data-help="payment">üí≥ –û–ø–ª–∞—Ç–∞</div>
                <div class="help-tab" data-help="contacts">üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
            </div>

            <div class="help-content">
                <div class="help-section active" id="orderingHelp">
                    <div class="help-item">
                        <h3>–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑</h3>
                        <p>–ü—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –ø—Ä–æ—Å—Ç –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–µ–Ω:</p>
                        <ul>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–Ω—Ä–∞–≤–∏–≤—à–∏–µ—Å—è —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</li>
                            <li>–î–æ–±–∞–≤—å—Ç–µ –∏—Ö –≤ –∫–æ—Ä–∑–∏–Ω—É, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É "–í –∫–æ—Ä–∑–∏–Ω—É"</li>
                            <li>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–æ—Ä–∑–∏–Ω—É, –Ω–∞–∂–∞–≤ –Ω–∞ –ø–ª–∞–≤–∞—é—â—É—é –∫–Ω–æ–ø–∫—É –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É</li>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è: –¥–æ—Å—Ç–∞–≤–∫–∞ –∏–ª–∏ —Å–∞–º–æ–≤—ã–≤–æ–∑</li>
                            <li>–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –∑–∞–∫–∞–∑</li>
                        </ul>
                    </div>
                    
                    <div class="help-item">
                        <h3>–ö–æ—Ä–∑–∏–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤</h3>
                        <p>–í –∫–æ—Ä–∑–∏–Ω–µ –≤—ã –º–æ–∂–µ—Ç–µ:</p>
                        <ul>
                            <li>–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</li>
                            <li>–ò–∑–º–µ–Ω—è—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞</li>
                            <li>–£–¥–∞–ª—è—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏</li>
                            <li>–í–∏–¥–µ—Ç—å –∏—Ç–æ–≥–æ–≤—É—é —Å—É–º–º—É –∑–∞–∫–∞–∑–∞</li>
                            <li>–ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–∫–∏–¥–∫–∏</li>
                        </ul>
                    </div>
                </div>

                <div class="help-section" id="deliveryHelp">
                    <div class="help-item">
                        <h3>–£—Å–ª–æ–≤–∏—è –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
                        <p>–ú—ã –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞:</p>
                        <ul>
                            <li><strong>–î–æ—Å—Ç–∞–≤–∫–∞ –∫—É—Ä—å–µ—Ä–æ–º</strong> - –ø—Ä–∏–≤–µ–∑–µ–º –∑–∞–∫–∞–∑ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É –≤ –Ø—Ä–æ—Å–ª–∞–≤–ª–µ</li>
                            <li><strong>–°–∞–º–æ–≤—ã–≤–æ–∑</strong> - –∑–∞–±–µ—Ä–µ—Ç–µ –∑–∞–∫–∞–∑ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –∏–∑ –Ω–∞—à–µ–≥–æ –º–∞–≥–∞–∑–∏–Ω–∞</li>
                        </ul>
                    </div>
                    
                    <div class="help-item">
                        <h3>–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
                        <p>–î–æ—Å—Ç–∞–≤–∫–∞ —Å—Ç–æ–∏—Ç 200 —Ä—É–±–ª–µ–π. –ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 3000 —Ä—É–±–ª–µ–π - –¥–æ—Å—Ç–∞–≤–∫–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è.</p>
                        <p>–í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏: –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 20:00</p>
                    </div>
                </div>

                <div class="help-section" id="paymentHelp">
                    <div class="help-item">
                        <h3>–°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã</h3>
                        <p>–ú—ã –ø—Ä–∏–Ω–∏–º–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã:</p>
                        <ul>
                            <li>–ù–∞–ª–∏—á–Ω—ã–º–∏ –∫—É—Ä—å–µ—Ä—É –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</li>
                            <li>–ë–∞–Ω–∫–æ–≤—Å–∫–æ–π –∫–∞—Ä—Ç–æ–π —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª</li>
                            <li>–û–Ω–ª–∞–π–Ω-–ø–µ—Ä–µ–≤–æ–¥–æ–º –ø–æ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–µ</li>
                        </ul>
                    </div>
                    
                    <div class="help-item">
                        <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
                        <p>–ü–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –Ω–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –∏ —É—Ç–æ—á–Ω–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–∞ –æ–ø–ª–∞—Ç—ã.</p>
                    </div>
                </div>

                <div class="help-section" id="contactsHelp">
                    <div class="help-item">
                        <h3>–ù–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>
                        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (999) 785-86-35</p>
                        <p><strong>–ê–¥—Ä–µ—Å:</strong> –Ø—Ä–æ—Å–ª–∞–≤–ª—å, —É–ª. –£–≥–ª–∏—á—Å–∫–∞—è, 4–∫1, –Ø—Ä–æ—Å–ª–∞–≤–ª—å</p>
                        <p><strong>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã:</strong> –ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 20:00</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="floating-buttons">
        <button class="cart-button" id="cartButton" onclick="showCartModal()">
            <i class="fas fa-shopping-bag"></i>
            <span id="cartTotalAmount">0 ‚ÇΩ</span>
            <span class="cart-count" id="cartCount">0</span>
        </button>
        <button class="admin-button" onclick="switchToAdminView()" title="–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è" id="adminButton">
            <i class="fas fa-cog"></i>
        </button>
        <button class="help-button" onclick="showHelp()" title="–ü–æ–º–æ—â—å" id="helpButton">
            <i class="fas fa-question"></i>
        </button>
    </div>

    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-shopping-cart"></i> –ö–æ—Ä–∑–∏–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤</div>
                <button class="close-modal" id="closeCart">√ó</button>
            </div>
            <div class="cart-items" id="cartItems"></div>
            <div class="cart-total">
                <span>–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞:</span>
                <span id="modalTotal">0 ‚ÇΩ</span>
            </div>
            <button class="checkout-btn" id="checkoutBtn" onclick="showOrderModal()">
                <i class="fas fa-receipt"></i> –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é
            </button>
        </div>
    </div>

    <div class="modal" id="orderModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-file-invoice"></i> –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</div>
                <button class="close-modal" id="closeOrder">√ó</button>
            </div>
            
            <div id="orderForm">
                <div class="order-summary">
                    <h3 style="margin-bottom:12px">–î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞</h3>
                    <div id="orderSummaryContent"></div>
                </div>

                <div class="form-group">
                    <label class="form-label">–ü—Ä–æ–º–æ–∫–æ–¥ (–µ—Å–ª–∏ –µ—Å—Ç—å)</label>
                    <div style="display:flex;gap:8px">
                        <input type="text" class="form-input" id="promoCodeInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
                        <button class="btn btn-primary" onclick="validatePromocode()" style="white-space:nowrap">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    </div>
                    <div id="promoCodeMessage" style="font-size:12px;margin-top:4px"></div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" class="form-input phone-input" id="phoneInput" placeholder="+7 (XXX) XXX-XX-XX" required value="+7">
                    <div class="settings-hint">–£–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–ª—è —Å–≤—è–∑–∏ —Å –≤–∞–º–∏</div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</label>
                    <div class="delivery-option selected" data-type="pickup" onclick="selectDeliveryOption('pickup')">
                        <div class="delivery-option-header">
                            <i class="fas fa-store"></i>
                            <div class="delivery-option-title">–°–∞–º–æ–≤—ã–≤–æ–∑ –∏–∑ –º–∞–≥–∞–∑–∏–Ω–∞</div>
                            <div class="delivery-price">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
                        </div>
                        <div class="delivery-option-description">–ó–∞–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è</div>
                    </div>
                    <div class="delivery-option" data-type="delivery" onclick="selectDeliveryOption('delivery')">
                        <div class="delivery-option-header">
                            <i class="fas fa-truck"></i>
                            <div class="delivery-option-title">–î–æ—Å—Ç–∞–≤–∫–∞ –∫—É—Ä—å–µ—Ä–æ–º</div>
                            <div class="delivery-price" id="deliveryPriceText">200 ‚ÇΩ</div>
                        </div>
                        <div class="delivery-option-description">–ü—Ä–∏–≤–µ–∑–µ–º –∑–∞–∫–∞–∑ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É –≤ –Ø—Ä–æ—Å–ª–∞–≤–ª–µ</div>
                    </div>
                </div>

                <div class="form-group" id="addressField" style="display:none">
                    <label class="form-label">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
                    <textarea class="form-input" id="deliveryAddress" placeholder="–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏: —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞..." rows="3"></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
                    <textarea class="form-input" id="orderComment" placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è, –≤—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–∫–∞–∑–∞–Ω–∏—è..." rows="3"></textarea>
                </div>
                
                <div class="form-actions" style="margin-top:20px">
                    <button class="checkout-btn" id="confirmOrderBtn" onclick="submitOrder()" disabled>
                        <i class="fas fa-paper-plane"></i> –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                    </button>
                </div>
            </div>

            <div id="orderSuccess" style="display:none">
                <div class="success-state">
                    <div class="success-icon">üéâ</div>
                    <div class="success-title">–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω!</div>
                    <div class="success-message">
                        –í–∞—à –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω—è—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É. –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.
                    </div>
                    <button class="checkout-btn" onclick="closeOrderSuccess()">
                        <i class="fas fa-shopping-bag"></i> –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="editProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä</div>
                <button class="close-modal" id="closeEditProduct">√ó</button>
            </div>
            <div id="editProductForm">
                <input type="hidden" id="editProductId">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</label>
                    <input type="text" class="form-input" id="editProductName">
                </div>
                <div class="form-group">
                    <label class="form-label">–¶–µ–Ω–∞</label>
                    <input type="number" class="form-input" id="editProductPrice">
                </div>
                <div class="form-group">
                    <label class="form-label">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
                    <input type="text" class="form-input" id="editProductImage">
                </div>
                <div class="form-group">
                    <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <div class="dropdown">
                        <div class="dropdown-toggle" id="editCategoryDropdownToggle">
                            <span>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="dropdown-menu" id="editCategoryDropdown">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea class="form-input" id="editProductDescription" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç</label>
                    <textarea class="form-input" id="editProductFact" rows="2"></textarea>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="editProductAvailable" checked>
                    <label class="checkbox-label">–¢–æ–≤–∞—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –∑–∞–∫–∞–∑–∞</label>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="editProductFeatured">
                    <label class="checkbox-label">–•–∏—Ç —Ç–æ–≤–∞—Ä (–±–µ–π–¥–∂ "–•–∏—Ç")</label>
                </div>
                <button class="checkout-btn" onclick="updateProduct()">
                    <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                </button>
            </div>
        </div>
    </div>

    <div class="modal" id="editCategoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-edit"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</div>
                <button class="close-modal" id="closeEditCategory">√ó</button>
            </div>
            <div id="editCategoryForm">
                <input type="hidden" id="editCategoryId">
                <div class="form-group">
                    <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</label>
                    <input type="text" class="form-input" id="editCategoryName">
                </div>
                <div class="form-group">
                    <label class="form-label">Slug (–∞–Ω–≥–ª.)</label>
                    <input type="text" class="form-input" id="editCategorySlug">
                </div>
                <div class="form-group">
                    <label class="form-label">–ò–∫–æ–Ω–∫–∞</label>
                    <div class="icon-scroll-container">
                        <div class="icon-grid" id="editIconGrid">
                        </div>
                    </div>
                </div>
                <div class="checkbox-group">
                    <input type="checkbox" id="editCategoryActive" checked>
                    <label class="checkbox-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–∞</label>
                </div>
                <button class="checkout-btn" onclick="updateCategory()">
                    <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                </button>
            </div>
        </div>
    </div>

    <div class="confirmation-modal" id="confirmationModal">
        <div class="confirmation-content">
            <div class="confirmation-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="confirmation-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</div>
            <div class="confirmation-message" id="confirmationMessage">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —ç–ª–µ–º–µ–Ω—Ç?</div>
            <div class="confirmation-actions">
                <button class="confirmation-btn cancel" onclick="closeConfirmationModal()">–û—Ç–º–µ–Ω–∞</button>
                <button class="confirmation-btn confirm" id="confirmDeleteBtn">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <div class="status-modal" id="statusModal">
        <div class="status-modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-edit"></i> –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞</div>
                <button class="close-modal" onclick="closeStatusModal()">√ó</button>
            </div>
            <div class="form-group">
                <div class="status-option" data-status="1" onclick="selectStatus(1)">
                    <strong>–ù–æ–≤—ã–π</strong> - –∑–∞–∫–∞–∑ —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–Ω
                </div>
                <div class="status-option" data-status="2" onclick="selectStatus(2)">
                    <strong>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</strong> - –∑–∞–∫–∞–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
                </div>
                <div class="status-option" data-status="3" onclick="selectStatus(3)">
                    <strong>–°–æ–±–∏—Ä–∞–µ—Ç—Å—è</strong> - –∑–∞–∫–∞–∑ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ
                </div>
                <div class="status-option" data-status="4" onclick="selectStatus(4)">
                    <strong>–í –ø—É—Ç–∏</strong> - –∑–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
                </div>
                <div class="status-option" data-status="5" onclick="selectStatus(5)">
                    <strong>–î–æ—Å—Ç–∞–≤–ª–µ–Ω</strong> - –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω
                </div>
                <div class="status-option" data-status="6" onclick="selectStatus(6)">
                    <strong>–û—Ç–º–µ–Ω–µ–Ω</strong> - –∑–∞–∫–∞–∑ –æ—Ç–º–µ–Ω–µ–Ω
                </div>
            </div>
            <button class="checkout-btn" onclick="applyStatusChange()" id="applyStatusBtn" disabled>
                <i class="fas fa-check"></i> –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å
            </button>
        </div>
    </div>
    <div class="dangerous-modal" id="dangerousActionModal">
    <div class="dangerous-modal-content">
        <div class="dangerous-modal-icon">
            <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="dangerous-modal-title" id="dangerousModalTitle">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</div>
        <div class="dangerous-modal-message" id="dangerousModalMessage">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!</div>
        <div class="dangerous-modal-actions">
            <button class="dangerous-modal-btn cancel" onclick="closeDangerousModal()">–û—Ç–º–µ–Ω–∞</button>
            <button class="dangerous-modal-btn confirm" id="confirmDangerousAction">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
        </div>
    </div>
</div>

    <script>
        let tg=window.Telegram.WebApp;tg.expand();tg.ready();let cart=[];let currentCategory='all';let products=[];let isAdmin=false;let currentUserRole='';let currentDangerousAction=null;let currentConfirmationCode=null;let adminData={products:[],orders:[],admins:[],stats:{},settings:{},themes:[],promocodes:[],categories:[]};let deliveryOption='pickup';let deliveryPrice=200;let freeDeliveryMin=3000;let currentOrdersPage=1;let ordersPerPage=10;let appliedPromocode=null;let activePattern='dots';let currentOrderId=null;let selectedStatus=null;let selectedCategory=null;let selectedIcon=null;let selectedDiscountType='percentage';let selectedRole='admin';let snowEnabled=false;let rainEnabled=false;let confettiEnabled=false;let nightEnabled=false;let snowflakes=[];let raindrops=[];let confettiPieces=[];let lightSpots=[];let currentDeleteCallback=null;let currentDeleteId=null;let currentDeleteType=null;let currentProductFilter='all';let currentProductSearch='';
        
        function validateOrderForm(){const e=document.getElementById('phoneInput'),t=document.getElementById('deliveryAddress'),n=document.getElementById('confirmOrderBtn');if(!n)return;const i=e.value.trim(),o=t.value.trim(),s=validatePhone(i),a=deliveryOption==='delivery'?o.length>0:!0,r=cart.length>0;n.disabled=!(s&&a&&r);n.style.background=n.disabled?'var(--secondary)':'linear-gradient(135deg,#10b981 0%,#059669 100%)';}
        
        function showToast(message,type='success'){const toast=document.getElementById('toast');const toastMessage=document.getElementById('toastMessage');const toastIcon=document.getElementById('toastIcon');toastMessage.textContent=message;toast.className='toast';toast.classList.add(type);if(type==='success'){toastIcon.className='fas fa-check-circle'}else if(type==='error'){toastIcon.className='fas fa-times-circle'}else{toastIcon.className='fas fa-info-circle'}toast.classList.add('show');setTimeout(()=>{toast.classList.remove('show')},2000)}

        async function exportToExcel(){if(!isAdmin)return showToast('–¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞','error');const e=document.getElementById('exportBtn'),t=document.getElementById('exportStatus'),n=e.innerHTML;e.disabled=!0,e.innerHTML='<i class="fas fa-spinner fa-spin"></i> –§–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç—á–µ—Ç...',t.textContent='',t.style.color='var(--text-light)',fetch('/api/export/orders',{method:'POST',headers:{'Telegram-Id':tg.initDataUnsafe.user?.id||'','Is-Admin':'true'}}).then(e=>e.json()).then(n=>{n.success?(t.textContent='‚úÖ –û—Ç—á–µ—Ç —É—Å–ø–µ—à–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω! –§–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –≤–∞—à Telegram.',t.style.color='#10B981',showToast('Excel-—Ñ–∞–π–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram','success')):(t.textContent='‚ùå –û—à–∏–±–∫–∞: '+(n.error||'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'),t.style.color='#EF4444',showToast('–û—à–∏–±–∫–∞ –ø—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ','error'))}).catch(()=>{t.textContent='‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º',t.style.color='#EF4444',showToast('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è','error')}).finally(()=>{e.disabled=!1,e.innerHTML=n})}
        
        async function loadProducts(){try{const response=await fetch('/api/products');if(!response.ok)throw new Error('Network error');products=await response.json();renderProducts()}catch(error){console.error('Error loading products:',error);showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ç–∞–ª–æ–≥–∞','error');renderProducts([])}}

        async function loadCategories(){try{const response=await fetch('/api/admin/categories');if(response.ok){const categories=await response.json();adminData.categories=categories;renderCategories(categories);renderCategoryDropdowns(categories);renderCategoriesAdmin(categories)}else{await createDefaultCategories()}}catch(error){console.error('Error loading categories:',error);await createDefaultCategories()}}

        async function createDefaultCategories(){const defaultCategories=[{name:'–†–æ–∑—ã',slug:'roses',icon:'fas fa-heart'},{name:'–¢—é–ª—å–ø–∞–Ω—ã',slug:'tulips',icon:'fas fa-sun'},{name:'–û—Ä—Ö–∏–¥–µ–∏',slug:'orchids',icon:'fas fa-spa'},{name:'–ü—Ä–µ–º–∏—É–º –±—É–∫–µ—Ç—ã',slug:'premium',icon:'fas fa-crown'}];for(const category of defaultCategories){try{await fetch('/api/admin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(category)})}catch(e){console.error('Error creating category:',e)}}await loadCategories()}

        function renderCategories(categories){const container=document.getElementById('categoriesContainer');if(!categories||categories.length===0){container.innerHTML='<div class="loading"><div>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div></div>';return}container.innerHTML='<button class="category-btn active" onclick="filterByCategory(\'all\')"><i class="fas fa-star"></i>–í—Å–µ —Ç–æ–≤–∞—Ä—ã</button>';categories.forEach(category=>{if(category.is_active){const btn=document.createElement('button');btn.className='category-btn';btn.onclick=()=>filterByCategory(category.slug);btn.innerHTML=`<i class="${category.icon}"></i>${category.name}`;container.appendChild(btn)}})}

        function filterByCategory(category){currentCategory=category;document.querySelectorAll('.category-btn').forEach(btn=>btn.classList.remove('active'));event.target.classList.add('active');renderProducts(category);tg.HapticFeedback.selectionChanged()}

        function renderProducts(category='all'){const grid=document.getElementById('productsGrid');if(products.length===0){grid.innerHTML='<div class="loading"><div>–¢–æ–≤–∞—Ä—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</div></div>';return}grid.innerHTML='';const filteredProducts=category==='all'?products:products.filter(product=>product.category===category&&product.is_available);if(filteredProducts.length===0){grid.innerHTML='<div class="loading"><div>–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤</div></div>';return}filteredProducts.forEach(product=>{const productCard=document.createElement('div');productCard.className='product-card fact-light';productCard.innerHTML=`<div class="product-image"><img src="${product.image_url}" alt="${product.name}" loading="lazy" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDQwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSI0MDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0yMDAgMTUwQzIyNSAyMDAgMjUwIDE1MCAyMDAgMTAwQzE1MCAxNTAgMTc1IDIwMCAyMDAgMTUwWiIgZmlsbD0iI0U1RTVFNSIvPgo8L3N2Zz4K'">${product.is_featured?'<div class="product-badge">–•–∏—Ç</div>':''}</div><div class="product-content"><div class="product-title">${product.name}</div><div class="product-description">${product.description}</div>${product.fact?`<div class="product-fact"><i class="fas fa-lightbulb fact-icon"></i><span class="product-fact-text">${product.fact}</span></div>`:''}<div class="product-footer"><div class="product-price">${product.price.toLocaleString()} ‚ÇΩ</div><button class="add-to-cart" data-id="${product.id}"><i class="fas fa-plus"></i>–í –∫–æ—Ä–∑–∏–Ω—É</button></div></div>`;grid.appendChild(productCard)});document.querySelectorAll('.add-to-cart').forEach(button=>{button.addEventListener('click',(e)=>{const productId=parseInt(e.target.closest('.add-to-cart').dataset.id);addToCart(productId)})});setupNightEffect()}

        function setupNightEffect(){if(!nightEnabled)return;document.querySelectorAll('.fact-light').forEach(element=>{element.addEventListener('touchstart',function(e){const touch=e.touches[0];const rect=this.getBoundingClientRect();const x=touch.clientX-rect.left;const y=touch.clientY-rect.top;this.style.setProperty('--mouse-x',x+'px');this.style.setProperty('--mouse-y',y+'px')});element.addEventListener('mousemove',function(e){const rect=this.getBoundingClientRect();const x=e.clientX-rect.left;const y=e.clientY-rect.top;this.style.setProperty('--mouse-x',x+'px');this.style.setProperty('--mouse-y',y+'px')})})}

        function addToCart(productId){const product=products.find(p=>p.id===productId);if(product){const existingItem=cart.find(item=>item.id===productId);if(existingItem){existingItem.quantity+=1}else{cart.push({...product,quantity:1})}updateCartDisplay();tg.HapticFeedback.impactOccurred('soft');showToast('–¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É','success')}}

        function updateCartDisplay(){const cartButton=document.getElementById('cartButton');const cartCount=document.getElementById('cartCount');const cartTotalAmount=document.getElementById('cartTotalAmount');const totalItems=cart.reduce((sum,item)=>sum+item.quantity,0);const totalAmount=cart.reduce((sum,item)=>sum+(item.price*item.quantity),0);cartCount.textContent=totalItems;cartTotalAmount.textContent=totalAmount.toLocaleString()+' ‚ÇΩ';if(totalItems>0){cartButton.style.display='flex'}else{cartButton.style.display='none'}renderCartItems();updateOrderSummary()}

        function renderCartItems(){const cartItems=document.getElementById('cartItems');const modalTotal=document.getElementById('modalTotal');const totalAmount=cart.reduce((sum,item)=>sum+(item.price*item.quantity),0);modalTotal.textContent=totalAmount.toLocaleString()+' ‚ÇΩ';if(cart.length===0){cartItems.innerHTML='<div class="empty-cart"><i class="fas fa-shopping-bag"></i><div>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div></div>';return}cartItems.innerHTML='';cart.forEach((item,index)=>{const cartItem=document.createElement('div');cartItem.className='cart-item';cartItem.innerHTML=`<div class="item-info"><div class="item-name">${item.name}</div><div class="item-price">${item.price.toLocaleString()} ‚ÇΩ</div></div><div class="item-actions"><div class="quantity-controls"><button class="quantity-btn" data-index="${index}" data-action="decrease">-</button><span class="quantity">${item.quantity}</span><button class="quantity-btn" data-index="${index}" data-action="increase">+</button></div><button class="remove-item" data-index="${index}"><i class="fas fa-trash"></i></button></div>`;cartItems.appendChild(cartItem)});document.querySelectorAll('.quantity-btn').forEach(button=>{button.addEventListener('click',(e)=>{const index=parseInt(e.target.closest('.quantity-btn').dataset.index);const action=e.target.closest('.quantity-btn').dataset.action;updateQuantity(index,action)})});document.querySelectorAll('.remove-item').forEach(button=>{button.addEventListener('click',(e)=>{const index=parseInt(e.target.closest('.remove-item').dataset.index);removeFromCart(index)})})}

        function updateQuantity(index,action){if(action==='increase'){cart[index].quantity+=1}else if(action==='decrease'){if(cart[index].quantity>1){cart[index].quantity-=1}else{removeFromCart(index);return}}updateCartDisplay();tg.HapticFeedback.selectionChanged()}

        function removeFromCart(index){const removedItem=cart[index];cart.splice(index,1);updateCartDisplay();tg.HapticFeedback.impactOccurred('light');showToast('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã','error')}

        function showCartModal(){document.getElementById('cartModal').style.display='flex'}

        function selectDeliveryOption(e){deliveryOption=e;document.querySelectorAll('.delivery-option').forEach(t=>{t.classList.remove('selected')});document.querySelector(`.delivery-option[data-type="${e}"]`).classList.add('selected');const t=document.getElementById('addressField');e==='delivery'?(t.style.display='block'):(t.style.display='none');updateOrderSummary();validateOrderForm();}
        
        function updateOrderSummary(){const cartTotal=cart.reduce((sum,item)=>sum+(item.price*item.quantity),0);let finalTotal=cartTotal;let deliveryCost=0;let deliveryText='';if(deliveryOption==='delivery'){deliveryCost=cartTotal>=freeDeliveryMin?0:deliveryPrice;finalTotal=cartTotal+deliveryCost;deliveryText=deliveryCost>0?`${deliveryCost} ‚ÇΩ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç ${freeDeliveryMin} ‚ÇΩ)`:'–ë–µ—Å–ø–ª–∞—Ç–Ω–æ'}else{deliveryText='–ë–µ—Å–ø–ª–∞—Ç–Ω–æ'}if(appliedPromocode){finalTotal-=appliedPromocode.discount_amount}const summaryContent=document.getElementById('orderSummaryContent');if(summaryContent){summaryContent.innerHTML=cart.map(item=>`<div class="summary-row"><span>${item.name} √ó ${item.quantity}</span><span>${(item.price*item.quantity).toLocaleString()} ‚ÇΩ</span></div>`).join('')+`<div class="summary-row"><span>–î–æ—Å—Ç–∞–≤–∫–∞</span><span>${deliveryText}</span></div>`+(appliedPromocode?`<div class="summary-row"><span>–°–∫–∏–¥–∫–∞ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É</span><span>-${appliedPromocode.discount_amount} ‚ÇΩ</span></div>`:'')+`<div class="summary-row total"><span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ</span><span>${finalTotal.toLocaleString()} ‚ÇΩ</span></div>`}}

        function validatePhone(phone){const phoneRegex=/^(\+7|8)[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;return phoneRegex.test(phone.replace(/\s/g,''))}

        async function validatePromocode(){const code=document.getElementById('promoCodeInput').value;const cartTotal=cart.reduce((sum,item)=>sum+(item.price*item.quantity),0);if(!code){showToast('–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥','error');return}try{const response=await fetch('/api/promocodes',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({action:'validate',code:code,order_amount:cartTotal})});const result=await response.json();if(result.valid){appliedPromocode=result;document.getElementById('promoCodeMessage').textContent=`‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω! –°–∫–∏–¥–∫–∞: ${result.discount_amount}‚ÇΩ`;document.getElementById('promoCodeMessage').style.color='green';updateOrderSummary();showToast('–ü—Ä–æ–º–æ–∫–æ–¥ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω—ë–Ω','success')}else{document.getElementById('promoCodeMessage').textContent=`‚ùå ${result.error}`;document.getElementById('promoCodeMessage').style.color='red';appliedPromocode=null;updateOrderSummary()}}catch(error){console.error('Error validating promocode:',error);showToast('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–º–æ–∫–æ–¥–∞','error')}}

        function showOrderModal(){if(cart.length===0){tg.showAlert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞.');return;}document.getElementById('cartModal').style.display='none';document.getElementById('orderModal').style.display='flex';selectDeliveryOption('pickup');updateOrderSummary();validateOrderForm();}
        
        function submitOrder(){const phone=document.getElementById('phoneInput').value;const comment=document.getElementById('orderComment').value;const deliveryAddress=deliveryOption==='delivery'?document.getElementById('deliveryAddress').value:'';if(deliveryOption==='delivery'&&!deliveryAddress.trim()){tg.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏.');return}if(!validatePhone(phone)){tg.showAlert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.');return}const cartTotal=cart.reduce((sum,item)=>sum+(item.price*item.quantity),0);let finalTotal=cartTotal;if(deliveryOption==='delivery'){finalTotal+=cartTotal>=freeDeliveryMin?0:deliveryPrice}if(appliedPromocode){finalTotal-=appliedPromocode.discount_amount}const orderData={user:{id:tg.initDataUnsafe.user?.id||'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',first_name:tg.initDataUnsafe.user?.first_name||'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ',username:tg.initDataUnsafe.user?.username||'–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'},phone:phone,comment:comment,delivery_option:deliveryOption,delivery_address:deliveryAddress,items:cart.map(item=>({id:item.id,name:item.name,price:item.price,quantity:item.quantity,total:item.price*item.quantity})),total:finalTotal,promocode_id:appliedPromocode?.promocode_id||null,discount_amount:appliedPromocode?.discount_amount||0,time:new Date().toLocaleString('ru-RU')};document.getElementById('confirmOrderBtn').disabled=true;document.getElementById('confirmOrderBtn').innerHTML='<i class="fas fa-spinner fa-spin"></i> –û—Ç–ø—Ä–∞–≤–ª—è–µ–º...';sendOrderToAdmin(orderData).then(success=>{if(success){showOrderSuccess()}}).catch(error=>{document.getElementById('confirmOrderBtn').disabled=false;document.getElementById('confirmOrderBtn').innerHTML='<i class="fas fa-paper-plane"></i> –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑'})}

        function sendOrderToAdmin(orderData){return fetch('/api/order',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(orderData)}).then(response=>response.json()).then(data=>{if(data.success){return true}else{tg.showAlert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞.');return false}}).catch(error=>{console.error('Error:',error);tg.showAlert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞.');return false})}

        function showOrderSuccess(){document.getElementById('orderForm').style.display='none';document.getElementById('orderSuccess').style.display='block'}

        function closeOrderSuccess(){document.getElementById('orderModal').style.display='none';cart=[];appliedPromocode=null;updateCartDisplay();document.getElementById('orderForm').style.display='block';document.getElementById('orderSuccess').style.display='none';document.getElementById('phoneInput').value='+7';document.getElementById('orderComment').value='';document.getElementById('deliveryAddress').value='';document.getElementById('promoCodeInput').value='';document.getElementById('promoCodeMessage').textContent='';selectDeliveryOption('pickup');validateOrderForm();}
        
        function setupEventListeners(){document.querySelectorAll('.filter-btn').forEach(btn=>{btn.addEventListener('click',function(){document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));this.classList.add('active');if(this.closest('#productsTab')){filterProducts()}else{filterOrders()}})});document.getElementById('confirmDangerousAction').addEventListener('click',executeDangerousAction);const map={'closeCart':'cartModal','closeOrder':'orderModal','closeEditProduct':'editProductModal','closeEditCategory':'editCategoryModal'};Object.keys(map).forEach(id=>{const el=document.getElementById(id);if(el)el.addEventListener('click',()=>document.getElementById(map[id]).style.display='none')})}
        
        function setupConfirmationModal(){document.getElementById('confirmDeleteBtn').addEventListener('click',function(){if(currentDeleteCallback){currentDeleteCallback(currentDeleteId,currentDeleteType)}closeConfirmationModal()})}

        function showConfirmationModal(message,type,id,callback){document.getElementById('confirmationMessage').textContent=message;currentDeleteCallback=callback;currentDeleteId=id;currentDeleteType=type;document.getElementById('confirmationModal').style.display='flex'}

        function closeConfirmationModal(){document.getElementById('confirmationModal').style.display='none';currentDeleteCallback=null;currentDeleteId=null;currentDeleteType=null}
        
        function initDropdowns(){document.addEventListener('click',function(e){if(e.target.closest('.dropdown-toggle')){e.stopPropagation();var t=e.target.closest('.dropdown-toggle');var n=t.nextElementSibling;document.querySelectorAll('.dropdown-menu').forEach(function(e){e!==n&&e.classList.contains('show')&&e.classList.remove('show')});n.classList.toggle('show')}else if(e.target.closest('.dropdown-item')){e.stopPropagation();var i=e.target.closest('.dropdown-item');var r=i.closest('.dropdown');var o=r.querySelector('.dropdown-toggle');var a=i.dataset.value;var c=i.textContent;o.querySelector('span').textContent=c;o.dataset.selectedValue=a;if(r.id==='categoryDropdown'||r.id==='editCategoryDropdown'){selectedCategory=a}else if(r.id==='discountTypeDropdown'){selectedDiscountType=a;document.getElementById('promoDiscountSuffix').textContent=a==='percentage'?'%':'‚ÇΩ'}else if(r.id==='roleDropdown'){selectedRole=a}r.querySelector('.dropdown-menu').classList.remove('show')}else{document.querySelectorAll('.dropdown-menu').forEach(function(e){e.classList.remove('show')})}})}
        
        function initIconSelection(){document.querySelectorAll('.icon-option').forEach(option=>{option.addEventListener('click',function(){document.querySelectorAll('.icon-option').forEach(opt=>opt.classList.remove('selected'));this.classList.add('selected');selectedIcon=this.dataset.icon})})}

        function renderCategoryDropdowns(e){var t=['categoryDropdown','editCategoryDropdown'];t.forEach(function(t){var n=document.getElementById(t);if(n){n.innerHTML='';var i=document.createElement('div');i.className='dropdown-item';i.dataset.value='';i.innerHTML='<i class="fas fa-times"></i> –ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';n.appendChild(i);e.forEach(function(e){var t=document.createElement('div');t.className='dropdown-item';t.dataset.value=e.slug;t.innerHTML='<i class="'+e.icon+'"></i> '+e.name;n.appendChild(t)})}})}
        
        async function checkAdminAccess(){try{const e=String(tg.initDataUnsafe.user?.id||"");console.log("Checking admin access for:",e);const t=await fetch("/api/admin",{headers:{"Telegram-Id":e}});const n=await t.json();console.log("Admin check response:",n);isAdmin=n.is_admin===true&&n.is_active!==false;currentUserRole=n.role||"";if(isAdmin){document.getElementById("adminButton").style.display="flex";updateOwnerElements();console.log("Admin access granted, role:",currentUserRole,"isAdmin:",isAdmin)}else{console.log("Admin access denied")}}catch(e){console.error("–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–¥–º–∏–Ω-–¥–æ—Å—Ç—É–ø–∞:",e)}}
        
        function updateOwnerElements(){console.log("Updating owner elements, current role:",currentUserRole);var e=document.getElementById("dangerousTabButton"),t=document.getElementById("promoFormContainer"),n=document.getElementById("adminFormContainer"),o=document.querySelector('[data-tab="export"]');if(currentUserRole==="owner"){e&&(e.style.display="flex"),t&&(t.style.display="block"),n&&(n.style.display="block"),o&&(o.style.display="flex");console.log("Owner elements enabled")}else{e&&(e.style.display="none"),t&&(t.style.display="none"),n&&(n.style.display="none"),o&&(o.style.display="flex");console.log("Owner elements disabled, export tab enabled")}}
        
        function switchToCustomerView(){document.getElementById("adminPanel").style.display="none";document.getElementById("helpView").style.display="none";document.getElementById("customerView").style.display="block";document.getElementById("adminButton").style.display=isAdmin?"flex":"none";document.getElementById("helpButton").style.display="flex"}
        
        function switchToAdminView(){if(!isAdmin){showToast("–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è","error");return}document.getElementById("customerView").style.display="none";document.getElementById("adminPanel").style.display="block";document.getElementById("helpView").style.display="none";document.getElementById("adminButton").style.display="none";document.getElementById("helpButton").style.display="none";updateOwnerElements();setTimeout(function(){setupAdminTabs();loadAdminData()},100)}
        
        function showHelp(){document.getElementById("customerView").style.display="none";document.getElementById("adminPanel").style.display="none";document.getElementById("helpView").style.display="block";document.getElementById("adminButton").style.display="none";document.getElementById("helpButton").style.display="none"}
        
        function setupAdminTabs(){document.querySelectorAll('.admin-tab').forEach(e=>{e.onclick=null;e.addEventListener('click',function(){document.querySelectorAll('.admin-tab').forEach(e=>e.classList.remove('active'));document.querySelectorAll('.admin-tab-content').forEach(e=>{e.style.display='none';e.classList.remove('active')});this.classList.add('active');const t=this.dataset.tab,n=document.getElementById(t+'Tab');if(n){n.style.display='block';n.classList.add('active');if(t==='dashboard')loadDashboard();if(t==='products')loadProductsAdmin();if(t==='orders')loadOrdersAdmin();if(t==='promocodes')loadPromocodes();if(t==='admins')loadAdmins();if(t==='settings')loadSettings();if(t==='export'){}if(t==='dangerous'){}}})})}
        
        function showTab(e){document.querySelectorAll(".admin-tab").forEach(function(e){e.classList.remove("active")});document.querySelectorAll(".admin-tab-content").forEach(function(e){e.style.display="none";e.classList.remove("active")});var t=document.querySelector('[data-tab="'+e+'"]');var n=document.getElementById(e+"Tab");if(t&&n){t.classList.add("active");n.style.display="block";n.classList.add("active");if(e==="dashboard")loadDashboard();if(e==="products")loadProductsAdmin();if(e==="orders")loadOrdersAdmin();if(e==="promocodes")loadPromocodes();if(e==="admins")loadAdmins();if(e==="settings")loadSettings()}}
        
        async function loadAdminData(){await loadDashboard();await loadProductsAdmin();await loadOrdersAdmin();await loadPromocodes();await loadAdmins();await loadSettings();await loadCategories()}

        async function loadDashboard(){try{const response=await fetch('/api/admin/stats');const stats=await response.json();document.getElementById('totalOrders').textContent=stats.total_orders;document.getElementById('completedOrders').textContent=stats.completed_orders;document.getElementById('totalRevenue').textContent=stats.total_revenue.toLocaleString()+' ‚ÇΩ';document.getElementById('potentialRevenue').textContent=stats.potential_revenue.toLocaleString()+' ‚ÇΩ';document.getElementById('totalProducts').textContent=stats.total_products;document.getElementById('activePromocodes').textContent=stats.active_promocodes||0}catch(error){console.error('Error loading dashboard:',error)}}

        async function loadProductsAdmin(){try{const response=await fetch('/api/products?show_all=true');const products=await response.json();adminData.products=products;document.getElementById('productSearch').value=currentProductSearch;document.querySelectorAll('.filter-btn').forEach(btn=>btn.classList.remove('active'));document.querySelector(`.filter-btn[data-status="${currentProductFilter}"]`).classList.add('active');filterProducts();}catch(error){console.error('Error loading products admin:',error);}} 
        
        async function updateCategoriesOrder(){const categoriesOrder={};adminData.categories.forEach((category,index)=>{categoriesOrder[category.id]=index+1});try{const response=await fetch('/api/admin/categories/reorder',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({reorder:categoriesOrder})});const result=await response.json();if(result.success){showToast('–ü–æ—Ä—è–¥–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω','success')}}catch(error){console.error('Error updating categories order:',error);showToast('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞','error')}}
        
        function renderProductsAdmin(products){const productsList=document.getElementById('productsList');productsList.innerHTML='';if(products.length===0){productsList.innerHTML='<tr><td colspan="8" class="empty-table-message">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td></tr>';return}products.forEach((product,index)=>{const row=document.createElement('tr');row.className='table-row';if(!product.is_available){row.classList.add('product-inactive')}row.setAttribute('data-id',product.id);const category=adminData.categories.find(c=>c.slug===product.category);row.innerHTML=`<td>${product.id}</td><td><img src="${product.image_url}" alt="${product.name}" class="table-product-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik0zMCAyMEMyNSAzMCAyMCAyMCAzMCAxMEM0MCAyMCAzNSAzMCAzMCAyMFoiIGZpbGw9IiNFNUU1RTUiLz4KPC9zdmc+'"></td><td><strong>${product.name}</strong><div style="font-size:11px;color:var(--text-light)">${product.description}</div></td><td>${product.price} ‚ÇΩ</td><td>${category?category.name:product.category}</td><td><span class="product-status ${product.is_available?'status-active':'status-inactive'}">${product.is_available?'–ê–∫—Ç–∏–≤–µ–Ω':'–ù–µ–∞–∫—Ç–∏–≤–µ–Ω'}</span></td><td><div class="move-buttons"><button class="move-btn" onclick="moveProductUp(${product.id})" ${index===0?'disabled':''}><i class="fas fa-chevron-up"></i></button><button class="move-btn" onclick="moveProductDown(${product.id})" ${index===products.length-1?'disabled':''}><i class="fas fa-chevron-down"></i></button></div></td><td><div class="admin-actions"><button class="btn btn-primary btn-sm" onclick="editProduct(${product.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"><i class="fas fa-edit fa-lg"></i></button><button class="btn btn-danger btn-sm" onclick="showDeleteConfirmation('product',${product.id})" title="–£–¥–∞–ª–∏—Ç—å"><i class="fas fa-trash fa-lg"></i></button></div></td>`;productsList.appendChild(row)})}
            
        function renderCategoriesAdmin(categories){const categoriesList=document.getElementById('categoriesList');categoriesList.innerHTML='';if(categories.length===0){categoriesList.innerHTML='<tr><td colspan="7" class="empty-table-message">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td></tr>';return}categories.forEach((category,index)=>{const row=document.createElement('tr');row.className='table-row';if(!category.is_active){row.classList.add('category-inactive')}row.innerHTML=`<td>${category.id}</td><td><i class="${category.icon}"></i> ${category.name}</td><td>${category.slug}</td><td><i class="${category.icon}"></i></td><td><span class="product-status ${category.is_active?'status-active':'status-inactive'}">${category.is_active?'–ê–∫—Ç–∏–≤–Ω–∞':'–ù–µ–∞–∫—Ç–∏–≤–Ω–∞'}</span></td><td><div class="move-buttons"><button class="move-btn" onclick="moveCategoryUp(${category.id})" ${index===0?'disabled':''}><i class="fas fa-chevron-up"></i></button><button class="move-btn" onclick="moveCategoryDown(${category.id})" ${index===categories.length-1?'disabled':''}><i class="fas fa-chevron-down"></i></button></div></td><td><div class="admin-actions"><button class="btn btn-primary btn-sm" onclick="editCategory(${category.id})" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"><i class="fas fa-edit fa-lg"></i></button><button class="btn btn-danger btn-sm" onclick="showDeleteConfirmation('category',${category.id})" title="–£–¥–∞–ª–∏—Ç—å"><i class="fas fa-trash fa-lg"></i></button></div></td>`;categoriesList.appendChild(row)})}
        
        function showDeleteConfirmation(type,id){let message='';let entityName='';switch(type){case'product':message='–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ç–æ–≤–∞—Ä?';entityName='—Ç–æ–≤–∞—Ä';break;case'category':message='–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∫–∞—Ç–µ–≥–æ—Ä–∏—é? –¢–æ–≤–∞—Ä—ã –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ç–∞–Ω—É—Ç –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.';entityName='–∫–∞—Ç–µ–≥–æ—Ä–∏—é';break;case'order':message='–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∑–∞–∫–∞–∑?';entityName='–∑–∞–∫–∞–∑';break;case'promocode':message='–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥?';entityName='–ø—Ä–æ–º–æ–∫–æ–¥';break;case'admin':message='–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞?';entityName='–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞';break}showConfirmationModal(message,type,id,deleteEntity)}

        function deleteEntity(id,type){switch(type){case'product':deleteProduct(id);break;case'category':deleteCategory(id);break;case'order':deleteOrder(id);break;case'promocode':deletePromocode(id);break;case'admin':deleteAdmin(id);break}}

        async function moveCategoryUp(categoryId){const categories=adminData.categories;const index=categories.findIndex(c=>c.id===categoryId);if(index>0){[categories[index],categories[index-1]]=[categories[index-1],categories[index]];await updateCategoriesOrder();renderCategoriesAdmin(categories)}}
        
        async function moveCategoryDown(categoryId){const categories=adminData.categories;const index=categories.findIndex(c=>c.id===categoryId);if(index<categories.length-1){[categories[index],categories[index+1]]=[categories[index+1],categories[index]];await updateCategoriesOrder();renderCategoriesAdmin(categories)}} 
        
        async function moveCategoryUp(categoryId){const categories=adminData.categories;const index=categories.findIndex(c=>c.id===categoryId);if(index>0){[categories[index],categories[index-1]]=[categories[index-1],categories[index]];await updateCategoriesOrder();loadCategories()}}

        async function moveCategoryDown(categoryId){const categories=adminData.categories;const index=categories.findIndex(c=>c.id===categoryId);if(index<categories.length-1){[categories[index],categories[index+1]]=[categories[index+1],categories[index]];await updateCategoriesOrder();loadCategories()}}

        async function updateProductsOrder(){const productsOrder={};adminData.products.forEach((product,index)=>{productsOrder[product.id]=index+1});try{const response=await fetch('/api/products',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({reorder:productsOrder})});const result=await response.json();if(result.success){showToast('–ü–æ—Ä—è–¥–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω','success')}}catch(error){console.error('Error updating products order:',error);showToast('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞','error')}}

        async function updateCategoriesOrder(){const categoriesOrder={};adminData.categories.forEach((category,index)=>{categoriesOrder[category.id]=index+1});try{const response=await fetch('/api/admin/categories/reorder',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({reorder:categoriesOrder})});const result=await response.json();if(result.success){showToast('–ü–æ—Ä—è–¥–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω','success')}}catch(error){console.error('Error updating categories order:',error);showToast('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Ä—è–¥–∫–∞','error')}}

        async function loadOrdersAdmin(){try{const response=await fetch('/api/order',{headers:{'Is-Admin':'true','User-Id':tg.initDataUnsafe.user?.id||''}});const orders=await response.json();adminData.orders=orders;renderOrdersAdmin(orders)}catch(error){console.error('Error loading orders admin:',error)}}

        function renderOrdersAdmin(orders){const ordersList=document.getElementById('ordersList');const pagination=document.getElementById('ordersPagination');ordersList.innerHTML='';if(orders.length===0){ordersList.innerHTML='<tr><td colspan="5" class="empty-table-message">–ó–∞–∫–∞–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td></tr>';pagination.innerHTML='';return}const statusNames={1:{name:'–ù–æ–≤—ã–π',color:'#EF4444',class:'new'},2:{name:'–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω',color:'#F59E0B',class:'confirmed'},3:{name:'–°–æ–±–∏—Ä–∞–µ—Ç—Å—è',color:'#8B5CF6',class:'confirmed'},4:{name:'–í –ø—É—Ç–∏',color:'#3B82F6',class:'confirmed'},5:{name:'–î–æ—Å—Ç–∞–≤–ª–µ–Ω',color:'#10B981',class:'delivered'},6:{name:'–û—Ç–º–µ–Ω–µ–Ω',color:'#6B7280',class:'cancelled'}};const startIndex=(currentOrdersPage-1)*ordersPerPage;const endIndex=startIndex+ordersPerPage;const paginatedOrders=orders.slice(startIndex,endIndex);paginatedOrders.forEach(order=>{const status=statusNames[order.status_id]||{name:'–ù–µ–∏–∑–≤–µ—Å—Ç–µ–Ω',color:'#6B7280',class:'new'};const telegramLink=`tg://openmessage?user_id=${order.user_id}`;const phoneLink=`https://t.me/+${order.phone.replace(/\D/g,'')}`;const row=document.createElement('tr');row.className='table-row';row.innerHTML=`<td>#${order.id}</td><td><strong>${order.user_name}</strong><div style="font-size:11px;color:var(--text-light)">${order.phone}</div></td><td><strong>${order.final_amount||order.total_amount} ‚ÇΩ</strong></td><td><span class="badge ${status.class}">${status.name}</span></td><td><div class="admin-actions"><button class="contact-btn" onclick="window.open('${telegramLink}')" title="–ù–∞–ø–∏—Å–∞—Ç—å –ø–æ ID"><i class="fas fa-user fa-sm"></i></button><button class="contact-btn" onclick="window.open('${phoneLink}')" title="–ù–∞–ø–∏—Å–∞—Ç—å –ø–æ –Ω–æ–º–µ—Ä—É"><i class="fas fa-phone fa-sm"></i></button><button class="btn btn-primary btn-sm" onclick="changeOrderStatus(${order.id})" title="–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å"><i class="fas fa-edit fa-lg"></i></button><button class="btn btn-danger btn-sm" onclick="showDeleteConfirmation('order',${order.id})" title="–£–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑"><i class="fas fa-trash fa-lg"></i></button></div></td>`;ordersList.appendChild(row)});const totalPages=Math.ceil(orders.length/ordersPerPage);pagination.innerHTML='';for(let i=1;i<=totalPages;i++){const pageBtn=document.createElement('button');pageBtn.className=`page-btn ${i===currentOrdersPage?'active':''}`;pageBtn.textContent=i;pageBtn.onclick=()=>{currentOrdersPage=i;renderOrdersAdmin(adminData.orders)};pagination.appendChild(pageBtn)}}

        async function loadPromocodes(){try{const response=await fetch('/api/promocodes',{headers:{'Telegram-Id':tg.initDataUnsafe.user?.id||''}});const promocodes=await response.json();adminData.promocodes=promocodes;renderPromocodes(promocodes)}catch(error){console.error('Error loading promocodes:',error)}}

        function renderPromocodes(promocodes){const promocodesList=document.getElementById('promocodesList');promocodesList.innerHTML='';if(promocodes.length===0){promocodesList.innerHTML='<tr><td colspan="5" class="empty-table-message">–ü—Ä–æ–º–æ–∫–æ–¥—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td></tr>';return}promocodes.forEach(promo=>{const row=document.createElement('tr');row.className='table-row';row.innerHTML=`<td><strong>${promo.code}</strong></td><td><div class="promo-discount">${promo.discount_value}${promo.discount_type==='percentage'?'%':'‚ÇΩ'}</div></td><td>${promo.used_count||0}/${promo.max_uses||'‚àû'}</td><td><span class="badge ${promo.is_active?'delivered':'cancelled'}">${promo.is_active?'–ê–∫—Ç–∏–≤–µ–Ω':'–ù–µ–∞–∫—Ç–∏–≤–µ–Ω'}</span></td><td>${currentUserRole==='owner'?`<button class="btn btn-danger btn-sm" onclick="showDeleteConfirmation('promocode',${promo.id})"><i class="fas fa-trash"></i></button>`:'-'}</td>`;promocodesList.appendChild(row)})}

        async function loadAdmins(){try{const response=await fetch('/api/admin/admins');const admins=await response.json();adminData.admins=admins;renderAdmins(admins)}catch(error){console.error('Error loading admins:',error)}}

        function renderAdmins(admins){const adminsList=document.getElementById('adminsList');adminsList.innerHTML='';if(admins.length===0){adminsList.innerHTML='<tr><td colspan="5" class="empty-table-message">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</td></tr>';return}admins.forEach(admin=>{const row=document.createElement('tr');row.className='table-row';row.innerHTML=`<td>${admin.id}</td><td>${admin.first_name}</td><td>@${admin.username}</td><td><span class="role-badge ${admin.role==='owner'?'role-owner':'role-admin'}">${admin.role==='owner'?'–í–ª–∞–¥–µ–ª–µ—Ü':'–ê–¥–º–∏–Ω'}</span></td><td>${admin.role!=='owner'&&currentUserRole==='owner'?`<button class="btn btn-danger btn-sm" onclick="showDeleteConfirmation('admin',${admin.id})"><i class="fas fa-trash"></i></button>`:'<span style="color:var(--text-light);font-size:10px">–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å</span>'}</td>`;adminsList.appendChild(row)})}

        async function loadSettings(){try{const response=await fetch('/api/admin/settings');const settings=await response.json();adminData.settings=settings;document.getElementById('shopNameInput').value=settings.shop_name?.value||'üå∏ Flower Shop';document.getElementById('shopSubtitleInput').value=settings.shop_subtitle?.value||'–≠–ª–∏—Ç–Ω—ã–µ –±—É–∫–µ—Ç—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–æ –Ø—Ä–æ—Å–ª–∞–≤–ª—é';document.getElementById('shopPhone').value=settings.contacts?.phone||'+7 (999) 123-45-67';document.getElementById('shopAddress').value=settings.contacts?.address||'–Ø—Ä–æ—Å–ª–∞–≤–ª—å, —É–ª. –¶–≤–µ—Ç–æ—á–Ω–∞—è, 15';document.getElementById('shopWorkingHours').value=settings.working_hours?.value||'–ï–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 9:00 –¥–æ 21:00';document.getElementById('deliveryPrice').value=settings.delivery_price?.value||200;document.getElementById('freeDeliveryMin').value=settings.free_delivery_min?.value||3000;deliveryPrice=settings.delivery_price?.value||200;freeDeliveryMin=settings.free_delivery_min?.value||3000;updateShopHeader();const themesResponse=await fetch('/api/admin/themes');const themes=await themesResponse.json();adminData.themes=themes;const activeThemeId=settings.active_theme?.value||'4';renderThemes(themes,activeThemeId);applyTheme(activeThemeId);if(settings.header_patterns){activePattern=settings.header_patterns.active||'dots';applyPattern(activePattern);document.querySelectorAll('.pattern-option').forEach(opt=>opt.classList.remove('selected'));const selectedPattern=document.querySelector(`.pattern-option[data-pattern="${activePattern}"]`);if(selectedPattern){selectedPattern.classList.add('selected');}}document.getElementById('snowEffect').checked=settings.snow_effect?.value||false;snowEnabled=settings.snow_effect?.value||false;toggleSnowfall(snowEnabled);document.getElementById('rainEffect').checked=settings.rain_effect?.value||false;rainEnabled=settings.rain_effect?.value||false;toggleRainfall(rainEnabled);document.getElementById('confettiEffect').checked=settings.confetti_effect?.value||false;confettiEnabled=settings.confetti_effect?.value||false;toggleConfetti(confettiEnabled);document.getElementById('nightEffect').checked=settings.night_effect?.value||false;nightEnabled=settings.night_effect?.value||false;toggleNightMode(nightEnabled);}catch(error){console.error('Error loading settings:',error)}}
        
        function renderThemes(themes,activeThemeId){const themeGrid=document.getElementById('themeGrid');themeGrid.innerHTML='';themes.sort((a,b)=>a.id-b.id).forEach(theme=>{const themeOption=document.createElement('div');themeOption.className=`theme-option ${theme.id==activeThemeId?'selected':''}`;themeOption.style.background=theme.background_value;themeOption.setAttribute('data-theme-id',theme.id);themeOption.onclick=()=>selectTheme(theme.id);themeGrid.appendChild(themeOption)})}
        
        function selectTheme(themeId){fetch('/api/themes',{method:'PUT',headers:{'Content-Type':'application/json','Telegram-Id':String(tg.initDataUnsafe.user?.id||'')},body:JSON.stringify({theme_id:themeId})}).then(response=>response.json()).then(result=>{if(result.success){document.querySelectorAll('.theme-option').forEach(opt=>opt.classList.remove('selected'));const selectedTheme=document.querySelector(`.theme-option[data-theme-id="${themeId}"]`);if(selectedTheme){selectedTheme.classList.add('selected');}applyTheme(themeId);showToast('–¢–µ–º–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞','success')}}).catch(error=>{console.error('Error selecting theme:',error);showToast('–û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã','error')})}

        function applyTheme(themeId){const theme=adminData.themes.find(t=>t.id==themeId);if(theme){const root=document.documentElement;const bgColor=theme.background_value;root.style.setProperty('--header-bg',bgColor);root.style.setProperty('--primary','#6b7280');root.style.setProperty('--primary-dark','#374151');root.style.setProperty('--primary-light','#d1d5db');root.style.setProperty('--secondary','#9ca3af');root.style.setProperty('--accent','#6b7280');root.style.setProperty('--accent-dark','#374151');root.style.setProperty('--price-color','#000000');root.style.setProperty('--button-bg','linear-gradient(135deg,#6b7280 0%,#374151 100%)');root.style.setProperty('--fact-border','#6b7280');root.style.setProperty('--fact-icon','#f59e0b');document.body.style.background=bgColor;document.getElementById('shopHeader').style.background=bgColor;document.querySelector('.admin-header').style.background=bgColor;document.querySelector('.help-header').style.background=bgColor;fetch('/api/admin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key:'active_theme',value:{value:themeId}})});}}

        function selectPattern(pattern){activePattern=pattern;document.querySelectorAll('.pattern-option').forEach(opt=>opt.classList.remove('selected'));document.querySelector(`.pattern-option[data-pattern="${pattern}"]`).classList.add('selected');applyPattern(pattern);fetch('/api/themes',{method:'PUT',headers:{'Content-Type':'application/json','Telegram-Id':String(tg.initDataUnsafe.user?.id||'')},body:JSON.stringify({pattern:pattern})}).then(response=>response.json()).then(result=>{if(result.success){showToast('–£–∑–æ—Ä –ø—Ä–∏–º–µ–Ω–µ–Ω','success')}}).catch(error=>{console.error('Error selecting pattern:',error);showToast('–û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —É–∑–æ—Ä–∞','error')})}

        function applyPattern(pattern){const header=document.getElementById('shopHeader');header.className='header '+pattern;}

        function updateShopHeader(){document.getElementById('shopName').textContent=document.getElementById('shopNameInput').value;document.getElementById('shopSubtitle').textContent=document.getElementById('shopSubtitleInput').value;document.getElementById('deliveryInfoText').textContent=`–î–æ—Å—Ç–∞–≤–∫–∞ ${deliveryPrice}‚ÇΩ ‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –æ—Ç ${freeDeliveryMin}‚ÇΩ`;document.getElementById('workingHoursText').textContent=document.getElementById('shopWorkingHours').value;document.getElementById('deliveryPriceText').textContent=`${deliveryPrice} ‚ÇΩ`}

        function toggleProductForm(){const content=document.getElementById('productFormContent');const icon=document.getElementById('productFormIcon');content.classList.toggle('expanded');icon.style.transform=content.classList.contains('expanded')?'rotate(180deg)':'rotate(0deg)'}

        function toggleCategoryForm(){const content=document.getElementById('categoryFormContent');const icon=document.getElementById('categoryFormIcon');content.classList.toggle('expanded');icon.style.transform=content.classList.contains('expanded')?'rotate(180deg)':'rotate(0deg)'}

        function togglePromoForm(){const content=document.getElementById('promoFormContent');const icon=document.getElementById('promoFormIcon');content.classList.toggle('expanded');icon.style.transform=content.classList.contains('expanded')?'rotate(180deg)':'rotate(0deg)'}

        function toggleAdminForm(){const content=document.getElementById('adminFormContent');const icon=document.getElementById('adminFormIcon');content.classList.toggle('expanded');icon.style.transform=content.classList.contains('expanded')?'rotate(180deg)':'rotate(0deg)'}

        function toggleSection(sectionId){const section=document.getElementById(sectionId);section.classList.toggle('expanded')}

        async function addProduct(){var e=document.getElementById('categoryDropdownToggle');var t=e.dataset.selectedValue||'';var n={name:document.getElementById('productName').value,price:parseInt(document.getElementById('productPrice').value),image_url:document.getElementById('productImage').value,category:t,description:document.getElementById('productDescription').value,fact:document.getElementById('productFact').value,is_available:true,is_featured:document.getElementById('productFeatured').checked};if(!n.name||!n.price){showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ —Ü–µ–Ω—É','error');return}try{var i=await fetch('/api/products',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(n)});var r=await i.json();if(r.success){showToast('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω','success');loadProductsAdmin();resetProductForm();loadProducts()}}catch(e){console.error('Error adding product:',e);showToast('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞','error')}}
        
        async function addCategory(){if(!selectedIcon){showToast('–í—ã–±–µ—Ä–∏—Ç–µ –∏–∫–æ–Ω–∫—É –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏','error');return}const category={name:document.getElementById('categoryName').value,slug:document.getElementById('categorySlug').value,icon:selectedIcon};if(!category.name||!category.slug){showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ slug –∫–∞—Ç–µ–≥–æ—Ä–∏–∏','error');return}try{const response=await fetch('/api/admin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(category)});const result=await response.json();if(result.success){showToast('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞','success');loadCategories();resetCategoryForm();renderCategoriesAdmin(adminData.categories)}}catch(error){console.error('Error adding category:',error);showToast('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏','error')}}

        async function editCategory(categoryId){const category=adminData.categories.find(c=>c.id===categoryId);if(!category)return;document.getElementById('editCategoryId').value=category.id;document.getElementById('editCategoryName').value=category.name;document.getElementById('editCategorySlug').value=category.slug;document.getElementById('editCategoryActive').checked=category.is_active;selectedIcon=category.icon;renderEditIconGrid();document.getElementById('editCategoryModal').style.display='flex'}

        function renderEditIconGrid(){const editIconGrid=document.getElementById('editIconGrid');editIconGrid.innerHTML='';const icons=['fas fa-heart','fas fa-star','fas fa-sun','fas fa-moon','fas fa-leaf','fas fa-spa','fas fa-seedling','fas fa-feather','fas fa-cloud','fas fa-fire','fas fa-tint','fas fa-snowflake','fas fa-tree','fas fa-mountain','fas fa-umbrella','fas fa-gem'];icons.forEach(icon=>{const option=document.createElement('div');option.className=`icon-option ${icon===selectedIcon?'selected':''}`;option.dataset.icon=icon;option.innerHTML=`<i class="${icon}"></i><div>${icon.split('fa-')[1]}</div>`;option.addEventListener('click',function(){document.querySelectorAll('.icon-option').forEach(opt=>opt.classList.remove('selected'));this.classList.add('selected');selectedIcon=this.dataset.icon;});editIconGrid.appendChild(option);});}

        async function updateCategory(){const categoryId=document.getElementById('editCategoryId').value;const category={name:document.getElementById('editCategoryName').value,slug:document.getElementById('editCategorySlug').value,icon:selectedIcon,is_active:document.getElementById('editCategoryActive').checked};try{const response=await fetch('/api/admin/category/'+categoryId,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(category)});const result=await response.json();if(result.success){showToast('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∞','success');document.getElementById('editCategoryModal').style.display='none';loadCategories();renderCategoriesAdmin(adminData.categories)}}catch(error){console.error('Error updating category:',error);showToast('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏','error')}}

        async function addPromocode(){const promoData={code:document.getElementById('promoCode').value,discount_type:selectedDiscountType,discount_value:parseInt(document.getElementById('promoDiscountValue').value),min_order_amount:parseInt(document.getElementById('promoMinOrder').value)||0,max_uses:document.getElementById('promoMaxUses').value?parseInt(document.getElementById('promoMaxUses').value):null,valid_until:document.getElementById('promoValidUntil').value||null};if(!promoData.code||!promoData.discount_value){showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–¥ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏','error');return}try{const response=await fetch('/api/promocodes',{method:'POST',headers:{'Content-Type':'application/json','Telegram-Id':tg.initDataUnsafe.user?.id||''},body:JSON.stringify(promoData)});const result=await response.json();if(result.success){showToast('–ü—Ä–æ–º–æ–∫–æ–¥ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω','success');loadPromocodes();resetPromoForm()}}catch(error){console.error('Error adding promocode:',error);showToast('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞','error')}}

        async function editProduct(productId){const product=adminData.products.find(p=>p.id===productId);if(!product)return;document.getElementById('editProductId').value=product.id;document.getElementById('editProductName').value=product.name;document.getElementById('editProductPrice').value=product.price;document.getElementById('editProductImage').value=product.image_url;selectedCategory=product.category;document.getElementById('editCategoryDropdownToggle').querySelector('span').textContent=adminData.categories.find(c=>c.slug===product.category)?.name||product.category;document.getElementById('editProductDescription').value=product.description||'';document.getElementById('editProductFact').value=product.fact||'';document.getElementById('editProductAvailable').checked=product.is_available;document.getElementById('editProductFeatured').checked=product.is_featured||false;document.getElementById('editProductModal').style.display='flex'}

        async function updateProduct(){var e=document.getElementById('editProductId').value;var t={name:document.getElementById('editProductName').value,price:parseInt(document.getElementById('editProductPrice').value),image_url:document.getElementById('editProductImage').value,category:selectedCategory||'',description:document.getElementById('editProductDescription').value,fact:document.getElementById('editProductFact').value,is_available:document.getElementById('editProductAvailable').checked,is_featured:document.getElementById('editProductFeatured').checked};try{var n=await fetch('/api/products',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({...t,id:parseInt(e)})});var i=await n.json();if(i.success){showToast('–¢–æ–≤–∞—Ä —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω','success');document.getElementById('editProductModal').style.display='none';await loadProductsAdmin();loadProducts()}}catch(e){console.error('Error updating product:',e);showToast('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞','error')}}
        
        async function deleteProduct(productId){try{const response=await fetch(`/api/products/${productId}`,{method:'DELETE'});const result=await response.json();if(result.success){showToast('–¢–æ–≤–∞—Ä —É–¥–∞–ª–µ–Ω','success');loadProductsAdmin();loadProducts()}}catch(error){console.error('Error deleting product:',error);showToast('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞','error')}}

        async function deleteCategory(categoryId){try{const response=await fetch(`/api/admin/category/${categoryId}`,{method:'DELETE'});const result=await response.json();if(result.success){showToast('–ö–∞—Ç–µ–≥–æ—Ä–∏—è —É–¥–∞–ª–µ–Ω–∞','success');loadCategories();renderCategoriesAdmin(adminData.categories)}}catch(error){console.error('Error deleting category:',error);showToast('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏','error')}}

        async function deletePromocode(promocodeId){try{const response=await fetch(`/api/promocodes/${promocodeId}`,{method:'DELETE',headers:{'Telegram-Id':tg.initDataUnsafe.user?.id||''}});const result=await response.json();if(result.success){showToast('–ü—Ä–æ–º–æ–∫–æ–¥ —É–¥–∞–ª–µ–Ω','success');loadPromocodes()}}catch(error){console.error('Error deleting promocode:',error);showToast('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞','error')}}

        function changeOrderStatus(orderId){currentOrderId=orderId;selectedStatus=null;document.querySelectorAll('.status-option').forEach(opt=>opt.classList.remove('selected'));document.getElementById('applyStatusBtn').disabled=true;document.getElementById('statusModal').style.display='flex'}

        function selectStatus(status){selectedStatus=status;document.querySelectorAll('.status-option').forEach(opt=>opt.classList.remove('selected'));document.querySelector(`.status-option[data-status="${status}"]`).classList.add('selected');document.getElementById('applyStatusBtn').disabled=false}

        function applyStatusChange(){if(!selectedStatus||!currentOrderId)return;updateOrderStatus(currentOrderId,selectedStatus);closeStatusModal()}

        function closeStatusModal(){document.getElementById('statusModal').style.display='none'}

        async function updateOrderStatus(orderId,statusId){try{const response=await fetch('/api/order',{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({order_id:parseInt(orderId),status_id:parseInt(statusId)})});const result=await response.json();if(result.success){showToast('–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω','success');loadOrdersAdmin()}}catch(error){console.error('Error updating order status:',error);showToast('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞','error')}}

        async function deleteOrder(orderId){try{const response=await fetch(`/api/order/${orderId}`,{method:'DELETE'});const result=await response.json();if(result.success){showToast('–ó–∞–∫–∞–∑ —É–¥–∞–ª–µ–Ω','success');loadOrdersAdmin()}}catch(error){console.error('Error deleting order:',error);showToast('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞','error')}}

        async function addAdmin(){const admin={telegram_id:document.getElementById('adminTelegramId').value,username:document.getElementById('adminUsername').value.replace('@',''),first_name:document.getElementById('adminFirstName').value,role:selectedRole};if(!admin.telegram_id||!admin.first_name){showToast('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è','error');return}try{const response=await fetch('/api/admin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(admin)});const result=await response.json();if(result.success){showToast('–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª–µ–Ω','success');loadAdmins();resetAdminForm()}}catch(error){console.error('Error adding admin:',error);showToast('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞','error')}}

        async function deleteAdmin(adminId){try{const response=await fetch(`/api/admin/${adminId}`,{method:'DELETE'});const result=await response.json();if(result.success){showToast('–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–¥–∞–ª–µ–Ω','success');loadAdmins()}}catch(error){console.error('Error deleting admin:',error);showToast('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞','error')}}

        function resetProductForm(){document.getElementById('productName').value='';document.getElementById('productPrice').value='';document.getElementById('productImage').value='';document.getElementById('productDescription').value='';document.getElementById('productFact').value='';document.getElementById('productFeatured').checked=false;selectedCategory=null;document.getElementById('categoryDropdownToggle').querySelector('span').textContent='–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é'}

        function resetCategoryForm(){document.getElementById('categoryName').value='';document.getElementById('categorySlug').value='';selectedIcon=null;document.querySelectorAll('.icon-option').forEach(opt=>opt.classList.remove('selected'))}

        function resetPromoForm(){document.getElementById('promoCode').value='';document.getElementById('promoDiscountValue').value='';document.getElementById('promoMinOrder').value='';document.getElementById('promoMaxUses').value='';document.getElementById('promoValidUntil').value='';selectedDiscountType='percentage';document.getElementById('discountTypeDropdownToggle').querySelector('span').textContent='–¢–∏–ø —Å–∫–∏–¥–∫–∏'}

        function resetAdminForm(){document.getElementById('adminTelegramId').value='';document.getElementById('adminUsername').value='';document.getElementById('adminFirstName').value='';selectedRole='admin';document.getElementById('roleDropdownToggle').querySelector('span').textContent='–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å'}

        function filterProducts(){const searchTerm=document.getElementById('productSearch').value.toLowerCase();const activeFilter=document.querySelector('.filter-btn.active')?.dataset.status||'all';currentProductFilter=activeFilter;currentProductSearch=searchTerm;let filteredProducts=adminData.products;if(activeFilter==='active'){filteredProducts=adminData.products.filter(product=>product.is_available)}else if(activeFilter==='inactive'){filteredProducts=adminData.products.filter(product=>!product.is_available)}if(searchTerm){filteredProducts=filteredProducts.filter(product=>product.name.toLowerCase().includes(searchTerm)||(product.description&&product.description.toLowerCase().includes(searchTerm))||(product.category&&product.category.toLowerCase().includes(searchTerm)))}renderProductsAdmin(filteredProducts)} 
            
        function filterOrders(){const searchTerm=document.getElementById('orderSearch').value.toLowerCase();const activeFilter=document.querySelector('.filter-btn.active')?.dataset.status||'all';const filteredOrders=adminData.orders.filter(order=>{const matchesSearch=order.user_name.toLowerCase().includes(searchTerm)||order.phone.includes(searchTerm)||order.id.toString().includes(searchTerm);const matchesFilter=activeFilter==='all'||order.status_id.toString()===activeFilter;return matchesSearch&&matchesFilter});renderOrdersAdmin(filteredOrders)}

        async function saveShopSettings(){try{const settings={shop_name:document.getElementById('shopNameInput').value,shop_subtitle:document.getElementById('shopSubtitleInput').value,phone:document.getElementById('shopPhone').value,address:document.getElementById('shopAddress').value,working_hours:document.getElementById('shopWorkingHours').value,delivery_price:parseInt(document.getElementById('deliveryPrice').value),free_delivery_min:parseInt(document.getElementById('freeDeliveryMin').value),snow_effect:document.getElementById('snowEffect').checked,rain_effect:document.getElementById('rainEffect').checked,confetti_effect:document.getElementById('confettiEffect').checked,night_effect:document.getElementById('nightEffect').checked};deliveryPrice=settings.delivery_price;freeDeliveryMin=settings.free_delivery_min;snowEnabled=settings.snow_effect;rainEnabled=settings.rain_effect;confettiEnabled=settings.confetti_effect;nightEnabled=settings.night_effect;const updateData=[{key:'shop_name',value:{value:settings.shop_name}},{key:'shop_subtitle',value:{value:settings.shop_subtitle}},{key:'contacts',value:{phone:settings.phone,address:settings.address}},{key:'working_hours',value:{value:settings.working_hours}},{key:'delivery_price',value:{value:settings.delivery_price}},{key:'free_delivery_min',value:{value:settings.free_delivery_min}},{key:'header_patterns',value:{patterns:['dots','lines','flowers','hearts','stars','waves','geometric'],active:activePattern}},{key:'snow_effect',value:{value:settings.snow_effect}},{key:'rain_effect',value:{value:settings.rain_effect}},{key:'confetti_effect',value:{value:settings.confetti_effect}},{key:'night_effect',value:{value:settings.night_effect}}];let successCount=0;for(const setting of updateData){const response=await fetch('/api/admin',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(setting)});if(response.ok){successCount++}}if(successCount>0){showToast('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã','success');updateShopHeader();toggleSnowfall(snowEnabled);toggleRainfall(rainEnabled);toggleConfetti(confettiEnabled);toggleNightMode(nightEnabled);}else{showToast('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫','error')}}catch(error){console.error('Error saving settings:',error);showToast('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫','error')}}

        function createSnowfall(){const container=document.getElementById('snowContainer');container.innerHTML='';snowflakes=[];for(let i=0;i<50;i++){const snowflake=document.createElement('div');snowflake.className='snowflake';const size=Math.random()*5+2;snowflake.style.width=size+'px';snowflake.style.height=size+'px';snowflake.style.left=Math.random()*100+'%';snowflake.style.opacity=Math.random()*0.6+0.4;snowflake.style.animationDuration=(Math.random()*5+5)+'s';snowflake.style.animationDelay=Math.random()*5+'s';container.appendChild(snowflake);snowflakes.push(snowflake)}}

        function toggleSnowfall(enabled){const container=document.getElementById('snowContainer');if(enabled){container.style.display='block';createSnowfall();}else{container.style.display='none';snowflakes.forEach(flake=>flake.remove());snowflakes=[];}}

        function createRainfall(){const container=document.getElementById('rainContainer');container.innerHTML='';raindrops=[];for(let i=0;i<80;i++){const raindrop=document.createElement('div');raindrop.className='raindrop';const left=Math.random()*100;const animationDuration=Math.random()*1+0.5;raindrop.style.left=left+'%';raindrop.style.animationDuration=animationDuration+'s';raindrop.style.animationDelay=Math.random()*2+'s';container.appendChild(raindrop);raindrops.push(raindrop)}}

        function toggleRainfall(enabled){const container=document.getElementById('rainContainer');if(enabled){container.style.display='block';createRainfall();}else{container.style.display='none';raindrops.forEach(drop=>drop.remove());raindrops=[];}}

        function createConfetti(){const container=document.getElementById('confettiContainer');container.innerHTML='';confettiPieces=[];const colors=['#6b7280','#9ca3af','#f59e0b','#84cc16','#10b981','#3b82f6','#8b5cf6','#ec4899'];for(let i=0;i<100;i++){const confetti=document.createElement('div');confetti.className='confetti';const size=Math.random()*8+4;const color=colors[Math.floor(Math.random()*colors.length)];confetti.style.width=size+'px';confetti.style.height=size+'px';confetti.style.background=color;confetti.style.left=Math.random()*100+'%';confetti.style.borderRadius=Math.random()>0.5?'50%':'0';confetti.style.animationDuration=(Math.random()*3+2)+'s';confetti.style.animationDelay=Math.random()*2+'s';container.appendChild(confetti);confettiPieces.push(confetti)}}

        function toggleConfetti(enabled){const container=document.getElementById('confettiContainer');if(enabled){container.style.display='block';createConfetti();}else{container.style.display='none';confettiPieces.forEach(piece=>piece.remove());confettiPieces=[];}}

        function createNightMode(){const container=document.getElementById('nightContainer');container.innerHTML='';const overlay=document.createElement('div');overlay.className='night-overlay';container.appendChild(overlay);lightSpots=[];setInterval(()=>{if(!nightEnabled)return;createRandomSpot(container)},3000)}

        function createRandomSpot(container){const spot=document.createElement('div');spot.className='light-spot';spot.style.left=Math.random()*100+'%';spot.style.top=Math.random()*100+'%';spot.style.animation='spotAppear 3s ease-out';container.appendChild(spot);lightSpots.push(spot);setTimeout(()=>{if(spot.parentNode){spot.remove();lightSpots=lightSpots.filter(s=>s!==spot)}},3000)}

        function toggleNightMode(enabled){const container=document.getElementById('nightContainer');if(enabled){container.style.display='block';createNightMode();setupNightEffect();}else{container.style.display='none';lightSpots.forEach(spot=>spot.remove());lightSpots=[];}}

        function showDangerousConfirmation(action,code){const actionTitles={'reset_orders':'–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤','reset_stats':'–°–±—Ä–æ—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏','delete_promocodes':'–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤','delete_products':'–£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤','clear_customers':'–û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –∫–ª–∏–µ–Ω—Ç–æ–≤','reset_shop':'–ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –º–∞–≥–∞–∑–∏–Ω–∞'};const actionMessages={'reset_orders':'–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç –≤—Å–µ –∑–∞–∫–∞–∑—ã –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ.','reset_stats':'–û–±–Ω—É–ª–∏—Ç –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤—ã—Ä—É—á–∫–∏ –∏ –ø—Ä–∏–±—ã–ª–∏. –ó–∞–∫–∞–∑—ã –æ—Å—Ç–∞–Ω—É—Ç—Å—è, –Ω–æ –∏—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç —Å–±—Ä–æ—à–µ–Ω—ã.','delete_promocodes':'–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç –≤—Å–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.','delete_products':'–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–µ. –î–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.','clear_customers':'–£–¥–∞–ª–∏—Ç –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏–∑ —Å–∏—Å—Ç–µ–º—ã. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è.','reset_shop':'–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç –≤—Å—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–∞. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.'};document.getElementById('dangerousModalTitle').textContent=actionTitles[action]||'–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è';document.getElementById('dangerousModalMessage').textContent=actionMessages[action]||'–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!';document.getElementById('dangerousActionModal').style.display='flex';}
        
        function closeDangerousModal(){document.getElementById('dangerousActionModal').style.display='none';currentDangerousAction=null;currentDangerousCode=null;}
        
        function executeDangerousAction(){closeDangerousModal();const t=document.getElementById("confirmDangerousAction");if(!t)return void showToast("–û—à–∏–±–∫–∞: –ö–Ω–æ–ø–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞","error");const e=t.dataset.action||currentDangerousAction,n=t.dataset.code||currentConfirmationCode;if(!e||!n)return void showToast("–û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö","error");t.disabled=!0;const o=t.textContent;t.innerHTML='<i class="fas fa-spinner fa-spin"></i> –ó–∞–≥—Ä—É–∑–∫–∞...',fetch("/api/dangerous",{method:"POST",headers:{"Content-Type":"application/json","Telegram-Id":tg.initDataUnsafe.user?.id||""},body:JSON.stringify({action:e,confirmation_code:n})}).then(t=>t.json()).then(e=>{t.disabled=!1,t.textContent=o,e.success?(showToast(e.message||"–£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!","success"),currentDangerousAction=null,currentConfirmationCode=null,t.removeAttribute("data-action"),t.removeAttribute("data-code"),"reset_orders"===currentDangerousAction||"reset_shop"===currentDangerousAction?loadOrdersAdmin():"delete_products"===currentDangerousAction&&loadProductsAdmin()):showToast(e.error||"–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞","error")}).catch(e=>{console.error(e),t.disabled=!1,t.textContent=o,showToast("–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è","error")})}
        
        function setupHelpTabs(){document.querySelectorAll(".help-tab").forEach(e=>{e.addEventListener("click",function(){document.querySelectorAll(".help-tab").forEach(e=>e.classList.remove("active")),this.classList.add("active");const t=this.dataset.help+"Help";document.querySelectorAll(".help-section").forEach(e=>{e.classList.remove("active"),e.id===t&&e.classList.add("active")})})})}
        
        function checkConfirmationCode(action,codeValue){fetch('/api/admin/confirmation-codes').then(response=>response.json()).then(codes=>{const validCode=codes.find(c=>c.code===codeValue&&c.is_active);if(validCode){currentDangerousAction=action;currentConfirmationCode=codeValue;document.getElementById('confirmDangerousAction').dataset.action=action;document.getElementById('confirmDangerousAction').dataset.code=codeValue;showDangerousConfirmation(action,codeValue);}else{showToast('–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è','error');}}).catch(error=>{console.error('Error checking confirmation code:',error);showToast('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞','error');});}
        
        function dangerousAction(action){let codeInput;if(action==='reset_orders'){codeInput=document.getElementById('reset_ordersCode');}else if(action==='reset_stats'){codeInput=document.getElementById('reset_statsCode');}else if(action==='delete_promocodes'){codeInput=document.getElementById('delete_promocodesCode');}else if(action==='delete_products'){codeInput=document.getElementById('delete_productsCode');}else if(action==='clear_customers'){codeInput=document.getElementById('clear_customersCode');}else if(action==='reset_shop'){codeInput=document.getElementById('reset_shopCode');}if(!codeInput){showToast('–û—à–∏–±–∫–∞: –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –ø–æ–ª–µ –≤–≤–æ–¥–∞','error');return;}const codeValue=codeInput.value;if(!codeValue){showToast('–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è','error');return;}checkConfirmationCode(action,codeValue);}

        function setupOrderValidation(){const e=document.getElementById('phoneInput'),t=document.getElementById('deliveryAddress'),n=document.getElementById('confirmOrderBtn');function checkOrderForm(){const i=e.value.trim(),o=t.value.trim(),s=deliveryOption==='delivery'?o.length>0:!0;n.disabled=!(validatePhone(i)&&s&&cart.length>0);}e.addEventListener('input',checkOrderForm);t.addEventListener('input',checkOrderForm);document.querySelectorAll('.delivery-option').forEach(e=>{e.addEventListener('click',()=>{setTimeout(checkOrderForm,100);})});checkOrderForm();}
        
        function showLoadingScreen(){const e=document.getElementById('loadingScreen');e&&(e.style.display='flex',e.style.opacity='1',e.style.visibility='visible');}
        
        function hideLoadingScreen(){const e=document.getElementById('loadingScreen');e&&(e.style.opacity='0',e.style.visibility='hidden',setTimeout(()=>{e.style.display='none'},800));}
        
        document.addEventListener('DOMContentLoaded',function(){document.querySelectorAll('.filter-btn').forEach(btn=>{btn.addEventListener('click',function(){document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));this.classList.add('active');if(this.closest('#productsTab')){filterProducts()}else{filterOrders()}})})});

        async function initApp(){showLoadingScreen();const e=document.querySelector('.loading-logo');e&&(e.onerror=function(){console.error('Logo failed to load, using fallback');this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiByeD0iNzUiIGZpbGw9IiM2QjcyODAiLz4KPHBhdGggZD0iTTc1IDQwQzk1IDYwIDk1IDkwIDc1IDExMEM1NSA5MCA1NSA2MCA3NSA0MFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=';this.onerror=null;},e.onload=function(){console.log('Logo loaded successfully from GitHub');});setTimeout(()=>{hideLoadingScreen();},3000);loadProducts();loadCategories();setupEventListeners();setupHelpTabs();checkAdminAccess();updateCartDisplay();deliveryOption='pickup';const t=document.getElementById('phoneInput'),n=document.getElementById('deliveryAddress');t&&t.addEventListener('input',validateOrderForm);n&&n.addEventListener('input',validateOrderForm);loadSettings();createSnowfall();createRainfall();createConfetti();createNightMode();initDropdowns();initIconSelection();setupConfirmationModal();setupOrderValidation();setupAdminTabs();document.getElementById("adminPanel").style.display="none";document.getElementById("helpView").style.display="none";document.getElementById("customerView").style.display="block";document.getElementById("adminButton").style.display=isAdmin?"flex":"none";document.getElementById("helpButton").style.display="flex";}
        
        window.addEventListener('load',function(){const e=document.querySelector('.loading-logo');e&&(e.onerror=function(){this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjE1MCIgdmlld0JveD0iMCAwIDE1MCAxNTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMTUwIiByeD0iNzUiIGZpbGw9IiM2QjcyODAiLz4KPHBhdGggZD0iTTc1IDQwQzk1IDYwIDk1IDkwIDc1IDExMEM1NSA5MCA1NSA2MCA3NSA0MFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=';});});
        
        if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initApp)}else{initApp()}
    </script>
</body>
</html>
